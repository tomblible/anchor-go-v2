{"address":"CWPeEXnSpELj7tSz9W4oQAGGRbavBtdnhY2bWMyPoo1","metadata":{"name":"margin_pool","version":"1.0.0","spec":"0.1.0","description":"Lending pools for margin accounts"},"instructions":[{"name":"admin_transfer_loan","discriminator":[250,90,166,175,49,8,132,144],"accounts":[{"name":"authority","signer":true,"address":"87GuoGyR11ES2zCMskSdXyVPh8bC32CW35sFU8Z7mJm2"},{"name":"margin_pool"},{"name":"source_loan_account","writable":true},{"name":"target_loan_account","writable":true},{"name":"loan_note_mint"},{"name":"pool_token_program"}],"args":[{"name":"amount","type":"u64"}]},{"name":"close_loan","discriminator":[96,114,111,204,149,228,235,124],"accounts":[{"name":"margin_account","signer":true},{"name":"loan_note_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"margin_account"},{"kind":"account","path":"loan_note_mint"}]}},{"name":"loan_note_mint","relations":["margin_pool"]},{"name":"margin_pool"},{"name":"beneficiary","writable":true,"signer":true},{"name":"token_program","address":"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"}],"args":[]},{"name":"collect","discriminator":[208,47,194,155,17,98,82,236],"accounts":[{"name":"margin_pool","writable":true},{"name":"vault","writable":true,"relations":["margin_pool"]},{"name":"fee_destination","writable":true,"relations":["margin_pool"]},{"name":"deposit_note_mint","writable":true,"relations":["margin_pool"]},{"name":"token_program"}],"args":[]},{"name":"configure","discriminator":[245,7,108,117,95,196,54,217],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"authority","signer":true},{"name":"airspace","relations":["token_metadata","deposit_metadata","loan_metadata"]},{"name":"margin_pool","writable":true},{"name":"token_mint","relations":["margin_pool","token_metadata"]},{"name":"token_metadata","writable":true},{"name":"deposit_metadata","writable":true},{"name":"loan_metadata","writable":true},{"name":"deposit_note_mint"},{"name":"loan_note_mint"},{"name":"metadata_program","address":"yT2ut38wC6A6zsGo2aUgy9kkh8EBuNXYvtmo7aUg1oW"},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"metadata","type":{"option":{"defined":{"name":"TokenMetadataParams"}}}},{"name":"config","type":{"option":{"defined":{"name":"MarginPoolConfig"}}}},{"name":"oracle","type":{"option":{"defined":{"name":"TokenPriceOracle"}}}}]},{"name":"create_pool","discriminator":[233,146,209,142,207,104,64,188],"accounts":[{"name":"authority","signer":true},{"name":"airspace"},{"name":"fee_owner","signer":true},{"name":"payer","writable":true,"signer":true},{"name":"margin_pool","writable":true,"pda":{"seeds":[{"kind":"account","path":"airspace"},{"kind":"account","path":"token_mint"}]}},{"name":"vault","writable":true,"pda":{"seeds":[{"kind":"account","path":"margin_pool"},{"kind":"const","value":[118,97,117,108,116]}]}},{"name":"deposit_note_mint","writable":true,"pda":{"seeds":[{"kind":"account","path":"margin_pool"},{"kind":"const","value":[100,101,112,111,115,105,116,45,110,111,116,101,115]}]}},{"name":"loan_note_mint","writable":true,"pda":{"seeds":[{"kind":"account","path":"margin_pool"},{"kind":"const","value":[108,111,97,110,45,110,111,116,101,115]}]}},{"name":"token_mint"},{"name":"fee_destination","writable":true,"pda":{"seeds":[{"kind":"account","path":"margin_pool"},{"kind":"account","path":"fee_owner"},{"kind":"const","value":[109,97,114,103,105,110,45,112,111,111,108,45,102,101,101,45,100,101,115,116,105,110,97,116,105,111,110]}]}},{"name":"token_metadata","writable":true},{"name":"deposit_note_metadata","writable":true},{"name":"loan_note_metadata","writable":true},{"name":"mint_token_program"},{"name":"pool_token_program","address":"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"},{"name":"metadata_program","address":"yT2ut38wC6A6zsGo2aUgy9kkh8EBuNXYvtmo7aUg1oW"},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[]},{"name":"deposit","discriminator":[242,35,198,137,82,225,242,182],"accounts":[{"name":"margin_pool","writable":true},{"name":"vault","writable":true,"relations":["margin_pool"]},{"name":"deposit_note_mint","writable":true,"relations":["margin_pool"]},{"name":"depositor","signer":true},{"name":"source","writable":true},{"name":"source_mint"},{"name":"destination","writable":true},{"name":"mint_token_program"},{"name":"pool_token_program"}],"args":[{"name":"change_kind","type":{"defined":{"name":"ChangeKind"}}},{"name":"amount","type":"u64"}]},{"name":"margin_borrow","discriminator":[38,83,46,53,36,165,52,65],"accounts":[{"name":"margin_account","signer":true},{"name":"margin_pool","writable":true},{"name":"loan_note_mint","writable":true,"relations":["margin_pool"]},{"name":"deposit_note_mint","writable":true,"relations":["margin_pool"]},{"name":"loan_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"margin_account"},{"kind":"account","path":"loan_note_mint"}]}},{"name":"deposit_account","writable":true},{"name":"pool_token_program"}],"args":[{"name":"change_kind","type":{"defined":{"name":"ChangeKind"}}},{"name":"amount","type":"u64"}]},{"name":"margin_borrow_v2","discriminator":[145,83,78,180,194,239,2,35],"accounts":[{"name":"margin_account","signer":true},{"name":"margin_pool","writable":true},{"name":"vault","writable":true,"relations":["margin_pool"]},{"name":"loan_note_mint","writable":true,"relations":["margin_pool"]},{"name":"token_mint"},{"name":"loan_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"margin_account"},{"kind":"account","path":"loan_note_mint"}]}},{"name":"destination","writable":true},{"name":"mint_token_program"},{"name":"pool_token_program","address":"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"}],"args":[{"name":"amount","type":"u64"}]},{"name":"margin_refresh_position","discriminator":[231,205,94,3,48,238,94,230],"accounts":[{"name":"margin_account"},{"name":"margin_pool"},{"name":"token_price_oracle"}],"args":[]},{"name":"margin_repay","discriminator":[160,47,37,174,37,55,49,154],"accounts":[{"name":"margin_account","signer":true},{"name":"margin_pool","writable":true},{"name":"loan_note_mint","writable":true,"relations":["margin_pool"]},{"name":"deposit_note_mint","writable":true,"relations":["margin_pool"]},{"name":"loan_account","writable":true},{"name":"deposit_account","writable":true},{"name":"pool_token_program"}],"args":[{"name":"change_kind","type":{"defined":{"name":"ChangeKind"}}},{"name":"amount","type":"u64"}]},{"name":"register_loan","discriminator":[4,166,101,215,21,10,215,207],"accounts":[{"name":"margin_account","signer":true},{"name":"loan_token_config"},{"name":"loan_note_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"margin_account"},{"kind":"account","path":"loan_note_mint"}]}},{"name":"loan_note_mint","relations":["margin_pool"]},{"name":"margin_pool"},{"name":"payer","writable":true,"signer":true},{"name":"token_program","address":"TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"rent","address":"SysvarRent111111111111111111111111111111111"}],"args":[]},{"name":"repay","discriminator":[234,103,67,82,208,234,219,166],"accounts":[{"name":"margin_pool","writable":true},{"name":"loan_note_mint","writable":true,"relations":["margin_pool"]},{"name":"token_mint"},{"name":"vault","writable":true,"relations":["margin_pool"]},{"name":"loan_account","writable":true},{"name":"repayment_token_account","writable":true},{"name":"repayment_account_authority","signer":true},{"name":"mint_token_program"},{"name":"pool_token_program"}],"args":[{"name":"change_kind","type":{"defined":{"name":"ChangeKind"}}},{"name":"amount","type":"u64"}]},{"name":"withdraw","discriminator":[183,18,70,156,148,109,161,34],"accounts":[{"name":"depositor","signer":true},{"name":"margin_pool","writable":true},{"name":"vault","writable":true,"relations":["margin_pool"]},{"name":"deposit_note_mint","writable":true,"relations":["margin_pool"]},{"name":"source","writable":true},{"name":"destination","writable":true},{"name":"token_mint"},{"name":"mint_token_program"},{"name":"pool_token_program"}],"args":[{"name":"change_kind","type":{"defined":{"name":"ChangeKind"}}},{"name":"amount","type":"u64"}]},{"name":"withdraw_fees","discriminator":[198,212,171,109,144,215,174,89],"accounts":[{"name":"fee_owner","signer":true},{"name":"margin_pool"},{"name":"vault","writable":true,"relations":["margin_pool"]},{"name":"fee_destination","writable":true,"relations":["margin_pool"]},{"name":"fee_withdrawal_destination","writable":true},{"name":"token_mint"},{"name":"deposit_note_mint","writable":true,"relations":["margin_pool"]},{"name":"mint_token_program"},{"name":"pool_token_program"}],"args":[]}],"accounts":[{"name":"Airspace","discriminator":[14,154,104,38,250,109,45,101]},{"name":"MarginAccount","discriminator":[133,220,173,213,179,211,43,238]},{"name":"MarginPool","discriminator":[142,255,28,32,196,168,170,175]},{"name":"PositionTokenMetadata","discriminator":[189,153,52,227,140,138,253,244]},{"name":"TokenMetadata","discriminator":[237,215,132,182,24,127,175,173]}],"events":[{"name":"Collect","discriminator":[33,58,3,191,40,238,175,101]},{"name":"Deposit","discriminator":[62,205,242,175,244,169,136,52]},{"name":"FeesWithdrawn","discriminator":[234,15,0,119,148,241,40,21]},{"name":"LoanTransferred","discriminator":[143,245,19,175,249,104,36,159]},{"name":"MarginBorrow","discriminator":[60,176,219,156,64,251,71,235]},{"name":"MarginRepay","discriminator":[80,38,108,3,19,167,95,66]},{"name":"PoolConfigured","discriminator":[110,51,15,167,103,41,48,66]},{"name":"PoolCreated","discriminator":[202,44,41,88,104,220,157,82]},{"name":"PositionTokenMetadataConfigured","discriminator":[84,72,164,123,215,114,127,218]},{"name":"Repay","discriminator":[163,101,155,40,203,244,185,68]},{"name":"TokenMetadataConfigured","discriminator":[40,113,47,8,184,157,160,48]},{"name":"Withdraw","discriminator":[192,241,201,217,70,150,90,247]}],"errors":[{"code":141100,"name":"Disabled","msg":"The pool is currently disabled"},{"code":141101,"name":"InterestAccrualBehind","msg":"Interest accrual is too far behind"},{"code":141102,"name":"DepositsOnly","msg":"The pool currently only allows deposits"},{"code":141103,"name":"InsufficientLiquidity","msg":"The pool does not have sufficient liquidity for the transaction"},{"code":141104,"name":"InvalidAmount","msg":"An invalid amount has been supplied"},{"code":141105,"name":"InvalidPoolPrice"},{"code":141106,"name":"InvalidPoolOracle"},{"code":141107,"name":"InvalidSetTo","msg":"An invalid `SetTo` value was given for a `TokenChange`"},{"code":141108,"name":"RepaymentExceedsTotalOutstanding"},{"code":141109,"name":"ExceedsMaxBorrowUtilRatio","msg":"This borrow pushes the pool util ratio above the limit for new borrows"},{"code":141110,"name":"SetMathOp","msg":"A token math operation over or underflowed"},{"code":141111,"name":"DepositLimitReached","msg":"The pool deposit limit has been exceeded"},{"code":141112,"name":"BorrowLimitReached","msg":"The pool borrow limit has been exceeded"},{"code":141113,"name":"TokenExtensionNotEnabled","msg":"The token extension is not enabled"},{"code":141114,"name":"InvalidWithdrawalAuthority","msg":"Invalid withdrawal authority, should be token owner or margin account"}],"types":[{"name":"Airspace","type":{"kind":"struct","fields":[{"name":"authority","type":"pubkey"},{"name":"is_restricted","type":"bool"}]}},{"name":"BitSet","serialization":"bytemuck","repr":{"kind":"c"},"type":{"kind":"struct","fields":[{"name":"bits","type":"u8"}]}},{"name":"ChangeKind","repr":{"kind":"rust"},"type":{"kind":"enum","variants":[{"name":"SetSourceTo"},{"name":"SetDestinationTo"},{"name":"ShiftBy"}]}},{"name":"Collect","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"fee_notes_minted","type":"u64"},{"name":"fee_tokens_claimed","type":"u64"},{"name":"fee_notes_balance","type":"u64"},{"name":"fee_tokens_balance","type":"u64"},{"name":"summary","type":{"defined":{"name":"MarginPoolSummary"}}}]}},{"name":"Deposit","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"user","type":"pubkey"},{"name":"source","type":"pubkey"},{"name":"destination","type":"pubkey"},{"name":"deposit_tokens","type":"u64"},{"name":"deposit_notes","type":"u64"},{"name":"summary","type":{"defined":{"name":"MarginPoolSummary"}}}]}},{"name":"FeesWithdrawn","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"fee_owner","type":"pubkey"},{"name":"fee_withdrawal_destination","type":"pubkey"},{"name":"fee_notes_withdrawn","type":"u64"},{"name":"fee_tokens_withdrawn","type":"u64"},{"name":"summary","type":{"defined":{"name":"MarginPoolSummary"}}}]}},{"name":"Invocation","serialization":"bytemuck","repr":{"kind":"c"},"type":{"kind":"struct","fields":[{"name":"caller_heights","type":{"defined":{"name":"BitSet"}}}]}},{"name":"LoanTransferred","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"source_loan_account","type":"pubkey"},{"name":"target_loan_account","type":"pubkey"},{"name":"amount","type":"u64"}]}},{"name":"MarginAccount","serialization":"bytemuck","repr":{"kind":"c","align":8},"type":{"kind":"struct","fields":[{"name":"version","type":"u8"},{"name":"bump_seed","type":{"array":["u8",1]}},{"name":"user_seed","type":{"array":["u8",2]}},{"name":"invocation","type":{"defined":{"name":"Invocation"}}},{"name":"reserved0","type":{"array":["u8",3]}},{"name":"owner","type":"pubkey"},{"name":"airspace","type":"pubkey"},{"name":"liquidator","type":"pubkey"},{"name":"positions","type":{"defined":{"name":"Positions"}}}]}},{"name":"MarginBorrow","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"user","type":"pubkey"},{"name":"loan_account","type":"pubkey"},{"name":"deposit_account","type":"pubkey"},{"name":"tokens","type":"u64"},{"name":"loan_notes","type":"u64"},{"name":"deposit_notes","type":"u64"},{"name":"summary","type":{"defined":{"name":"MarginPoolSummary"}}}]}},{"name":"MarginPool","repr":{"kind":"c","align":8},"type":{"kind":"struct","fields":[{"name":"version","type":"u8"},{"name":"pool_bump","type":{"array":["u8",1]}},{"name":"airspace","type":"pubkey"},{"name":"vault","type":"pubkey"},{"name":"fee_destination","type":"pubkey"},{"name":"deposit_note_mint","type":"pubkey"},{"name":"loan_note_mint","type":"pubkey"},{"name":"token_mint","type":"pubkey"},{"name":"address","type":"pubkey"},{"name":"config","type":{"defined":{"name":"MarginPoolConfig"}}},{"name":"borrowed_tokens","type":{"array":["u8",24]}},{"name":"uncollected_fees","type":{"array":["u8",24]}},{"name":"deposit_tokens","type":"u64"},{"name":"deposit_notes","type":"u64"},{"name":"loan_notes","type":"u64"},{"name":"accrued_until","type":"i64"},{"name":"token_price_oracle","type":{"defined":{"name":"TokenPriceOracle"}}}]}},{"name":"MarginPoolConfig","type":{"kind":"struct","fields":[{"name":"flags","type":"u64"},{"name":"utilization_rate_1","type":"u16"},{"name":"utilization_rate_2","type":"u16"},{"name":"borrow_rate_0","type":"u16"},{"name":"borrow_rate_1","type":"u16"},{"name":"borrow_rate_2","type":"u16"},{"name":"borrow_rate_3","type":"u16"},{"name":"management_fee_rate","type":"u16"},{"name":"deposit_limit","type":"u64"},{"name":"borrow_limit","type":"u64"},{"name":"reserved","type":"u64"}]}},{"name":"MarginPoolSummary","type":{"kind":"struct","fields":[{"name":"borrowed_tokens","type":"u64"},{"name":"uncollected_fees","type":"u64"},{"name":"deposit_tokens","type":"u64"},{"name":"deposit_notes","type":"u64"},{"name":"loan_notes","type":"u64"},{"name":"accrued_until","type":"i64"}]}},{"name":"MarginRepay","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"user","type":"pubkey"},{"name":"loan_account","type":"pubkey"},{"name":"deposit_account","type":"pubkey"},{"name":"repaid_tokens","type":"u64"},{"name":"repaid_loan_notes","type":"u64"},{"name":"repaid_deposit_notes","type":"u64"},{"name":"summary","type":{"defined":{"name":"MarginPoolSummary"}}}]}},{"name":"PoolConfigured","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"oracle","type":{"defined":{"name":"TokenPriceOracle"}}},{"name":"config","type":{"defined":{"name":"MarginPoolConfig"}}}]}},{"name":"PoolCreated","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"vault","type":"pubkey"},{"name":"fee_destination","type":"pubkey"},{"name":"deposit_note_mint","type":"pubkey"},{"name":"loan_note_mint","type":"pubkey"},{"name":"token_mint","type":"pubkey"},{"name":"authority","type":"pubkey"},{"name":"payer","type":"pubkey"},{"name":"summary","type":{"defined":{"name":"MarginPoolSummary"}}},{"name":"version","type":"u8"}]}},{"name":"PositionTokenMetadata","type":{"kind":"struct","fields":[{"name":"airspace","type":"pubkey"},{"name":"position_token_mint","type":"pubkey"},{"name":"underlying_token_mint","type":"pubkey"},{"name":"adapter_program","type":"pubkey"},{"name":"token_program","type":"pubkey"},{"name":"token_kind","type":{"defined":{"name":"TokenKind"}}},{"name":"value_modifier","type":"u16"},{"name":"max_staleness","type":"u64"}]}},{"name":"PositionTokenMetadataConfigured","type":{"kind":"struct","fields":[{"name":"requester","type":"pubkey"},{"name":"authority","type":"pubkey"},{"name":"metadata_account","type":"pubkey"},{"name":"metadata","type":{"defined":{"name":"PositionTokenMetadata"}}}]}},{"name":"Positions","serialization":"bytemuck","repr":{"kind":"c"},"type":{"kind":"struct","fields":[{"name":"positions","type":{"array":["u8",7432]}}]}},{"name":"Repay","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"user","type":"pubkey"},{"name":"loan_account","type":"pubkey"},{"name":"repayment_token_account","type":"pubkey"},{"name":"repaid_tokens","type":"u64"},{"name":"repaid_loan_notes","type":"u64"},{"name":"summary","type":{"defined":{"name":"MarginPoolSummary"}}}]}},{"name":"TokenKind","type":{"kind":"enum","variants":[{"name":"NonCollateral"},{"name":"Collateral"},{"name":"Claim"},{"name":"AdapterCollateral"}]}},{"name":"TokenMetadata","type":{"kind":"struct","fields":[{"name":"airspace","type":"pubkey"},{"name":"token_mint","type":"pubkey"},{"name":"token_price_oracle","type":{"defined":{"name":"TokenPriceOracle"}}}]}},{"name":"TokenMetadataConfigured","type":{"kind":"struct","fields":[{"name":"requester","type":"pubkey"},{"name":"authority","type":"pubkey"},{"name":"metadata_account","type":"pubkey"},{"name":"metadata","type":{"defined":{"name":"TokenMetadata"}}}]}},{"name":"TokenMetadataParams","type":{"kind":"struct","fields":[{"name":"token_kind","type":{"defined":{"name":"TokenKind"}}},{"name":"collateral_weight","type":"u16"},{"name":"max_leverage","type":"u16"},{"name":"max_staleness","type":"u64"}]}},{"name":"TokenPriceOracle","type":{"kind":"enum","variants":[{"name":"NoOracle"},{"name":"PythPull","fields":[{"name":"feed_id","type":{"array":["u8",32]}}]},{"name":"PythPullRedemption","fields":[{"name":"feed_id","type":{"array":["u8",32]}},{"name":"quote_mint","type":"pubkey"}]}]}},{"name":"Withdraw","type":{"kind":"struct","fields":[{"name":"margin_pool","type":"pubkey"},{"name":"user","type":"pubkey"},{"name":"source","type":"pubkey"},{"name":"destination","type":"pubkey"},{"name":"withdraw_tokens","type":"u64"},{"name":"withdraw_notes","type":"u64"},{"name":"summary","type":{"defined":{"name":"MarginPoolSummary"}}}]}}],"constants":[{"name":"FEE_DESTINATION","type":"bytes","value":"[109, 97, 114, 103, 105, 110, 45, 112, 111, 111, 108, 45, 102, 101, 101, 45, 100, 101, 115, 116, 105, 110, 97, 116, 105, 111, 110]"}]}