{"address":"dkpZqrxHFrhziEMQ931GLtfy11nFkCsfMftH9u6QwBU","metadata":{"name":"mctp","version":"0.1.0","spec":"0.1.0","description":"Created with Anchor"},"instructions":[{"name":"bridge_locked_fee","discriminator":[112,171,205,105,227,59,197,128],"accounts":[{"name":"ledger","writable":true},{"name":"ledger_acc","writable":true},{"name":"relayer","writable":true,"signer":true},{"name":"relayer_acc","writable":true,"optional":true},{"name":"locked_fee","writable":true},{"name":"locked_fee_acc","writable":true},{"name":"mint_from","writable":true},{"name":"cctp_deposit","accounts":[{"name":"cctp_token_sender_authority"},{"name":"cctp_token_token_messenger"},{"name":"cctp_token_remote_token_messenger"},{"name":"cctp_token_token_minter"},{"name":"cctp_token_local_token","writable":true},{"name":"cctp_token_event_auth"},{"name":"cctp_core_message_transmitter","writable":true},{"name":"message","writable":true,"signer":true},{"name":"token_messenger_minter"},{"name":"message_transmitter"}]},{"name":"token_program"},{"name":"associated_token_program"},{"name":"system_program"}],"args":[]},{"name":"bridge_with_fee","discriminator":[141,239,37,224,28,231,237,51],"accounts":[{"name":"ledger","writable":true},{"name":"ledger_acc","writable":true},{"name":"relayer","writable":true,"signer":true},{"name":"relayer_acc","writable":true,"optional":true},{"name":"mint_from","writable":true},{"name":"cctp_deposit","accounts":[{"name":"cctp_token_sender_authority"},{"name":"cctp_token_token_messenger"},{"name":"cctp_token_remote_token_messenger"},{"name":"cctp_token_token_minter"},{"name":"cctp_token_local_token","writable":true},{"name":"cctp_token_event_auth"},{"name":"cctp_core_message_transmitter","writable":true},{"name":"message","writable":true,"signer":true},{"name":"token_messenger_minter"},{"name":"message_transmitter"}]},{"name":"wormhole_post_message","accounts":[{"name":"emitter"},{"name":"config","writable":true},{"name":"emitter_sequence","writable":true},{"name":"fee_collector","writable":true},{"name":"message","writable":true,"signer":true},{"name":"core_bridge_program"},{"name":"clock"},{"name":"rent"}]},{"name":"token_program"},{"name":"system_program"}],"args":[]},{"name":"claim_order","discriminator":[164,202,83,197,77,171,96,234],"accounts":[{"name":"cctp_claim","accounts":[{"name":"payer","writable":true,"signer":true},{"name":"caller"},{"name":"main"},{"name":"cctp_mint"},{"name":"cctp_core_authority"},{"name":"cctp_core_message_transmitter"},{"name":"cctp_core_used_nonces","writable":true},{"name":"cctp_core_event_auth"},{"name":"cctp_token_token_messenger"},{"name":"cctp_token_remote_token_messenger"},{"name":"cctp_token_token_minter","writable":true},{"name":"cctp_token_local_token","docs":["with seeds constraint we will sure the cctp_mint is correct"],"writable":true},{"name":"cctp_token_token_pair"},{"name":"cctp_receiver_acc","writable":true},{"name":"cctp_token_custody","writable":true},{"name":"cctp_token_event_auth"},{"name":"token_messenger_minter"},{"name":"message_transmitter"}]},{"name":"order"},{"name":"order_from_acc","writable":true},{"name":"token_program"},{"name":"system_program"}],"args":[{"name":"params","type":{"defined":{"name":"ClaimOrderParams"}}}]},{"name":"close_order","discriminator":[90,103,209,28,7,63,168,4],"accounts":[{"name":"state","docs":["but as we want to close it and change its type we should use AccountInfo type"],"writable":true},{"name":"relayer","writable":true},{"name":"system_program"}],"args":[]},{"name":"create_order","discriminator":[141,54,37,207,237,210,250,215],"accounts":[{"name":"ledger","writable":true},{"name":"ledger_acc","writable":true},{"name":"relayer","writable":true,"signer":true},{"name":"relayer_acc","writable":true,"optional":true},{"name":"mint_from","writable":true},{"name":"order_state","writable":true},{"name":"cctp_deposit","accounts":[{"name":"cctp_token_sender_authority"},{"name":"cctp_token_token_messenger"},{"name":"cctp_token_remote_token_messenger"},{"name":"cctp_token_token_minter"},{"name":"cctp_token_local_token","writable":true},{"name":"cctp_token_event_auth"},{"name":"cctp_core_message_transmitter","writable":true},{"name":"message","writable":true,"signer":true},{"name":"token_messenger_minter"},{"name":"message_transmitter"}]},{"name":"fee_manager_program"},{"name":"token_program"},{"name":"system_program"}],"args":[]},{"name":"flash_swap_finish","discriminator":[31,43,233,57,62,243,215,107],"accounts":[{"name":"order","writable":true},{"name":"order_to_acc","writable":true},{"name":"mint_to"},{"name":"token_program"}],"args":[]},{"name":"flash_swap_start","discriminator":[210,86,206,176,90,195,113,50],"accounts":[{"name":"order","writable":true},{"name":"order_from_acc","writable":true},{"name":"driver","signer":true},{"name":"driver_from_acc","writable":true},{"name":"token_program"},{"name":"instruction_sysvar"}],"args":[{"name":"finish_ins_index","type":"u16"}]},{"name":"init_bridge_ledger","discriminator":[167,102,128,106,121,118,186,76],"accounts":[{"name":"trader","writable":true,"signer":true},{"name":"ledger","writable":true},{"name":"ledger_acc"},{"name":"custom_payload_store","docs":["We will hash all data of it and store it in ledger as custom payload."],"optional":true},{"name":"mint_from"},{"name":"system_program"}],"args":[{"name":"params","type":{"defined":{"name":"InitBridgeLedgerParams"}}}]},{"name":"init_order_ledger","discriminator":[143,235,252,194,211,90,134,77],"accounts":[{"name":"trader","writable":true,"signer":true},{"name":"ledger","writable":true},{"name":"ledger_acc"},{"name":"mint_from"},{"name":"system_program"}],"args":[{"name":"params","type":{"defined":{"name":"InitOrderLedgerParams"}}}]},{"name":"post_source_order","discriminator":[12,95,149,164,83,122,255,241],"accounts":[{"name":"order_state"},{"name":"relayer","writable":true,"signer":true},{"name":"wormhole_post_message","accounts":[{"name":"emitter"},{"name":"config","writable":true},{"name":"emitter_sequence","writable":true},{"name":"fee_collector","writable":true},{"name":"message","writable":true,"signer":true},{"name":"core_bridge_program"},{"name":"clock"},{"name":"rent"}]},{"name":"system_program"}],"args":[]},{"name":"redeem_with_fee","discriminator":[246,208,184,183,114,154,68,122],"accounts":[{"name":"vaa"},{"name":"cctp_claim","accounts":[{"name":"payer","writable":true,"signer":true},{"name":"caller"},{"name":"main"},{"name":"cctp_mint"},{"name":"cctp_core_authority"},{"name":"cctp_core_message_transmitter"},{"name":"cctp_core_used_nonces","writable":true},{"name":"cctp_core_event_auth"},{"name":"cctp_token_token_messenger"},{"name":"cctp_token_remote_token_messenger"},{"name":"cctp_token_token_minter","writable":true},{"name":"cctp_token_local_token","docs":["with seeds constraint we will sure the cctp_mint is correct"],"writable":true},{"name":"cctp_token_token_pair"},{"name":"cctp_receiver_acc","writable":true},{"name":"cctp_token_custody","writable":true},{"name":"cctp_token_event_auth"},{"name":"token_messenger_minter"},{"name":"message_transmitter"}]},{"name":"dest","writable":true},{"name":"dest_acc","writable":true},{"name":"relayer_acc","writable":true},{"name":"token_program"},{"name":"system_program"}],"args":[{"name":"params","type":{"defined":{"name":"RedeemWithFeeParams"}}}],"returns":"u64"},{"name":"refund_order","discriminator":[164,168,47,144,154,1,241,255],"accounts":[{"name":"order"},{"name":"order_from_acc","writable":true},{"name":"dest","writable":true},{"name":"dest_acc","writable":true},{"name":"relayer","writable":true,"signer":true},{"name":"relayer_from_acc","writable":true},{"name":"system_program"},{"name":"token_program"}],"args":[]},{"name":"register_order","discriminator":[92,37,29,46,77,250,219,6],"accounts":[{"name":"vaa"},{"name":"order","writable":true},{"name":"relayer","writable":true,"signer":true},{"name":"system_program"}],"args":[{"name":"params","type":{"defined":{"name":"RegisterOrderParams"}}}]},{"name":"set_auction_winner","discriminator":[63,231,14,33,159,196,43,39],"accounts":[{"name":"order","writable":true},{"name":"auction"}],"args":[{"name":"expected_winner","type":"pubkey"}]},{"name":"settle_order","discriminator":[80,74,204,34,12,183,66,66],"accounts":[{"name":"order","writable":true},{"name":"order_from_acc","writable":true},{"name":"order_to_acc","writable":true},{"name":"relayer","writable":true,"signer":true},{"name":"relayer_from_acc","writable":true},{"name":"mint_to"},{"name":"dest","writable":true},{"name":"dest_acc","writable":true,"optional":true},{"name":"referrer"},{"name":"fee_collector"},{"name":"referrer_fee_acc","writable":true,"optional":true},{"name":"mayan_fee_acc","writable":true,"optional":true},{"name":"token_program_out"},{"name":"token_program"},{"name":"system_program"},{"name":"associated_token_program"}],"args":[{"name":"try_close_ata","type":"bool"}]},{"name":"unlock_fee","discriminator":[95,219,253,5,215,222,12,79],"accounts":[{"name":"vaa"},{"name":"mint_from"},{"name":"locked_fee","writable":true},{"name":"locked_fee_acc","writable":true},{"name":"unlocker","signer":true},{"name":"unlocker_acc","writable":true},{"name":"token_program"}],"args":[{"name":"params","type":{"defined":{"name":"UnlockFeeParams"}}}]},{"name":"unlock_fee_with_refine","discriminator":[122,32,107,109,136,250,139,227],"accounts":[{"name":"vaa_unlock"},{"name":"vaa_refine"},{"name":"mint_from"},{"name":"locked_fee","writable":true},{"name":"locked_fee_acc","writable":true},{"name":"unlocker","signer":true},{"name":"unlocker_acc","writable":true},{"name":"token_program"}],"args":[{"name":"params","type":{"defined":{"name":"UnlockFeeWithRefineParams"}}}]},{"name":"withdraw_bridge_ledger","discriminator":[153,164,15,94,22,26,195,138],"accounts":[{"name":"ledger","writable":true},{"name":"ledger_acc"},{"name":"withdraw_shared","accounts":[{"name":"mint_from"},{"name":"trader","writable":true,"signer":true},{"name":"trader_acc"},{"name":"token_program"},{"name":"system_program"}]}],"args":[]},{"name":"withdraw_order_ledger","discriminator":[173,104,218,246,6,172,116,207],"accounts":[{"name":"ledger","writable":true},{"name":"ledger_acc"},{"name":"withdraw_shared","accounts":[{"name":"mint_from"},{"name":"trader","writable":true,"signer":true},{"name":"trader_acc"},{"name":"token_program"},{"name":"system_program"}]}],"args":[]}],"accounts":[{"name":"AuctionState","discriminator":[252,227,205,147,72,64,250,126]},{"name":"BridgeLedgerState","discriminator":[34,147,108,255,240,145,64,43]},{"name":"LockedFee","discriminator":[248,71,52,103,114,233,58,19]},{"name":"OrderDestSolanaState","discriminator":[198,129,44,70,167,41,108,44]},{"name":"OrderLedgerState","discriminator":[55,52,56,210,43,133,8,80]},{"name":"OrderSourceSolanaState","discriminator":[251,166,188,142,205,71,239,203]}],"events":[{"name":"BridgedLockedFee","discriminator":[162,129,40,225,193,223,66,62]},{"name":"BridgedWithFee","discriminator":[147,222,57,87,100,194,196,3]},{"name":"LedgerBridgeInitialized","discriminator":[162,159,206,146,56,81,123,85]},{"name":"LedgerOrderInitialized","discriminator":[184,47,251,219,32,203,91,45]},{"name":"OrderCreated","discriminator":[224,1,229,63,254,60,190,159]}],"errors":[{"code":6000,"name":"InvalidDestinationChain","msg":"Invalid destination chain"},{"code":6001,"name":"AmountInTooSmall","msg":"Amount in is less than minimum (slippage tolerance)"},{"code":6002,"name":"InvalidZeroAmount"},{"code":6003,"name":"DestAddressZero"},{"code":6004,"name":"FeesOverflow"},{"code":6005,"name":"FeesTooHigh"},{"code":6006,"name":"DestSolanaNotAllowed"},{"code":6007,"name":"InvalidLedgerMode"},{"code":6008,"name":"SuiDoesNotSupportLockedFee"},{"code":6009,"name":"ReferrerFeeRateTooHigh","msg":"Referrer fee rate too high (max 50)"},{"code":6010,"name":"FeeRateRefIsNotZero","msg":"Referrer fee rate is not zero when addr red is zero"},{"code":6011,"name":"InvalidCctpDepositMode"},{"code":6012,"name":"InvalidPayloadLength"},{"code":6013,"name":"OnlyBridgeWithFeeSupportsCustomPayload"},{"code":6014,"name":"InvalidTraderForWithdraw"},{"code":6015,"name":"InvalidMintFrom"},{"code":6016,"name":"InvalidEmitterChain"},{"code":6017,"name":"InvalidEmitterAddress"},{"code":6018,"name":"InvalidVaaPayloadLength"},{"code":6019,"name":"VaaHashMismatch"},{"code":6020,"name":"MainAccOverflowed"},{"code":6021,"name":"AmountCCtpClaimMismatch"},{"code":6022,"name":"InvalidCctpVersion"},{"code":6023,"name":"InvalidCctpDomain"},{"code":6024,"name":"InvalidCctpCaller"},{"code":6025,"name":"InvalidCctpRecipient"},{"code":6026,"name":"DestShouldBeSignerInCustomPayload","msg":"Dest should be signer in custom payload"},{"code":6027,"name":"UnlockFeeNonceMismatch"},{"code":6028,"name":"InvalidUnlockFeeGasDrop"},{"code":6029,"name":"GasDropUnlockIsSufficient"},{"code":6030,"name":"InvalidChainSource"},{"code":6031,"name":"InvalidChainDest"},{"code":6032,"name":"InvalidOrderStatus"},{"code":6033,"name":"InvalidCctpMessage"},{"code":6034,"name":"InvalidAmountClaimed"},{"code":6035,"name":"DeadlineIsPassed"},{"code":6036,"name":"DeadlineIsNotPassed"},{"code":6037,"name":"MintAndTokenProgramMismatch"},{"code":6038,"name":"InvalidMint"},{"code":6039,"name":"InvalidExpectedWinner"},{"code":6040,"name":"AuctionIsNotFinished"},{"code":6041,"name":"AuctionHashMismatch"},{"code":6042,"name":"OrderIsNotClaimed"},{"code":6043,"name":"FlashSwapIsAlreadyStarted"},{"code":6044,"name":"InvalidFinishIndex"},{"code":6045,"name":"InvalidFinishProgramId"},{"code":6046,"name":"InvalidFinishDiscriminator"},{"code":6047,"name":"InvalidFinishOrderAccount"},{"code":6048,"name":"InvalidFinishDataLength"},{"code":6049,"name":"FlashSwapIsNotStarted"},{"code":6050,"name":"InsufficientOutputAmount"},{"code":6051,"name":"WinnerIsPrivilegedYet"},{"code":6052,"name":"MissingRequiredOptionalAccount"},{"code":6053,"name":"InvalidStateAccount"},{"code":6054,"name":"InvalidRelayer"},{"code":6055,"name":"Overflow"}],"types":[{"name":"AuctionState","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"hash","type":{"array":["u8",32]}},{"name":"initializer","type":"pubkey"},{"name":"close_epoch","type":"u64"},{"name":"amount_out_min","type":"u64"},{"name":"winner","type":"pubkey"},{"name":"amount_promised","type":"u64"},{"name":"valid_from","type":"u64"},{"name":"seq_msg","type":"u64"}]}},{"name":"BridgeLedgerState","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"base_info","type":{"defined":{"name":"LedgerBase"}}},{"name":"custom_payload","type":{"array":["u8",32]}}]}},{"name":"BridgedLockedFee","type":{"kind":"struct","fields":[{"name":"cctp_nonce","type":"u64"}]}},{"name":"BridgedWithFee","type":{"kind":"struct","fields":[{"name":"cctp_nonce","type":"u64"},{"name":"next_sequence","type":"u64"}]}},{"name":"ClaimOrderParams","type":{"kind":"struct","fields":[{"name":"cctp_message","type":{"array":["u8",248]}},{"name":"cctp_attestation","type":"bytes"}]}},{"name":"InitBridgeLedgerParams","type":{"kind":"struct","fields":[{"name":"addr_dest","type":{"array":["u8",32]}},{"name":"amount_in_min","type":"u64"},{"name":"gas_drop","type":"u64"},{"name":"fee_redeem","type":"u64"},{"name":"fee_solana","type":"u64"},{"name":"domain_dest","type":"u32"},{"name":"chain_dest","type":"u16"},{"name":"key_rnd","type":{"array":["u8",32]}},{"name":"mode","type":"u8"}]}},{"name":"InitOrderLedgerParams","type":{"kind":"struct","fields":[{"name":"addr_dest","type":{"array":["u8",32]}},{"name":"amount_in_min","type":"u64"},{"name":"gas_drop","type":"u64"},{"name":"fee_redeem","type":"u64"},{"name":"fee_solana","type":"u64"},{"name":"domain_dest","type":"u32"},{"name":"chain_dest","type":"u16"},{"name":"key_rnd","type":{"array":["u8",32]}},{"name":"mode","type":"u8"},{"name":"token_out","type":{"array":["u8",32]}},{"name":"amount_out_min","type":"u64"},{"name":"deadline","type":"u64"},{"name":"addr_ref","type":{"array":["u8",32]}},{"name":"fee_rate_ref","type":"u8"}]}},{"name":"LedgerBase","type":{"kind":"struct","fields":[{"name":"mode","type":{"defined":{"name":"LedgerMode"}}},{"name":"trader","type":"pubkey"},{"name":"key_rnd","type":{"array":["u8",32]}},{"name":"mint_from","type":"pubkey"},{"name":"addr_dest","type":{"array":["u8",32]}},{"name":"chain_dest","type":"u16"},{"name":"domain_dest","type":"u32"},{"name":"gas_drop","type":"u64"},{"name":"fee_redeem","type":"u64"},{"name":"fee_solana","type":"u64"}]}},{"name":"LedgerBridgeInitialized","type":{"kind":"struct","fields":[{"name":"mint_from","type":"pubkey"},{"name":"amount_in","type":"u64"}]}},{"name":"LedgerMode","repr":{"kind":"rust"},"type":{"kind":"enum","variants":[{"name":"NONE"},{"name":"BridgeWithFee"},{"name":"BridgeLockedFee"},{"name":"CreateOrder"}]}},{"name":"LedgerOrderInitialized","type":{"kind":"struct","fields":[{"name":"mint_from","type":"pubkey"},{"name":"amount_in","type":"u64"}]}},{"name":"LockedFee","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"cctp_nonce","type":"u64"},{"name":"gas_drop","type":"u64"},{"name":"addr_dest","type":{"array":["u8",32]}}]}},{"name":"OrderCreated","type":{"kind":"struct","fields":[{"name":"cctp_nonce","type":"u64"},{"name":"hash","type":{"array":["u8",32]}}]}},{"name":"OrderDestSolanaState","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"status","type":{"defined":{"name":"OrderDestSolanaStatus"}}},{"name":"order_info","type":{"defined":{"name":"OrderInfo"}}},{"name":"relayer","type":"pubkey"},{"name":"swap_info","type":{"defined":{"name":"SwapInfo"}}}]}},{"name":"OrderDestSolanaStatus","repr":{"kind":"rust"},"type":{"kind":"enum","variants":[{"name":"NONE"},{"name":"REGISTERED"},{"name":"CLAIMED"},{"name":"SWAPPED"},{"name":"SETTLED"},{"name":"REFUNDED"},{"name":"CLOSED"}]}},{"name":"OrderInfo","type":{"kind":"struct","fields":[{"name":"payload_type","type":"u8"},{"name":"trader","type":{"array":["u8",32]}},{"name":"chain_source","type":"u16"},{"name":"token_in","type":{"array":["u8",32]}},{"name":"amount_in","type":"u64"},{"name":"addr_dest","type":{"array":["u8",32]}},{"name":"chain_dest","type":"u16"},{"name":"token_out","type":{"array":["u8",32]}},{"name":"amount_out_min","type":"u64"},{"name":"gas_drop","type":"u64"},{"name":"fee_redeem","type":"u64"},{"name":"deadline","type":"u64"},{"name":"addr_ref","type":{"array":["u8",32]}},{"name":"fee_rate_ref","type":"u8"},{"name":"fee_rate_mayan","type":"u8"},{"name":"cctp_nonce","type":"u64"},{"name":"cctp_domain","type":"u32"}]}},{"name":"OrderLedgerState","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"base_info","type":{"defined":{"name":"LedgerBase"}}},{"name":"token_out","type":{"array":["u8",32]}},{"name":"amount_out_min","type":"u64"},{"name":"deadline","type":"u64"},{"name":"addr_ref","type":{"array":["u8",32]}},{"name":"fee_rate_ref","type":"u8"}]}},{"name":"OrderSourceSolanaState","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"ledger","type":"pubkey"},{"name":"hash","type":{"array":["u8",32]}}]}},{"name":"RedeemWithFeeParams","type":{"kind":"struct","fields":[{"name":"payload_type","type":"u8"},{"name":"gas_drop","type":"u64"},{"name":"fee_redeem","type":"u64"},{"name":"custom_payload","type":{"array":["u8",32]}},{"name":"cctp_message","type":{"array":["u8",248]}},{"name":"cctp_attestation","type":"bytes"}]}},{"name":"RegisterOrderParams","type":{"kind":"struct","fields":[{"name":"payload_type","type":"u8"},{"name":"trader","type":{"array":["u8",32]}},{"name":"chain_source","type":"u16"},{"name":"token_in","type":{"array":["u8",32]}},{"name":"amount_in","type":"u64"},{"name":"addr_dest","type":{"array":["u8",32]}},{"name":"token_out","type":{"array":["u8",32]}},{"name":"amount_out_min","type":"u64"},{"name":"gas_drop","type":"u64"},{"name":"fee_redeem","type":"u64"},{"name":"deadline","type":"u64"},{"name":"addr_ref","type":{"array":["u8",32]}},{"name":"fee_rate_ref","type":"u8"},{"name":"fee_rate_mayan","type":"u8"},{"name":"cctp_nonce","type":"u64"},{"name":"cctp_domain","type":"u32"}]}},{"name":"SwapInfo","type":{"kind":"struct","fields":[{"name":"winner","type":"pubkey"},{"name":"cctp_mint","type":"pubkey"},{"name":"amount_promised","type":"u64"},{"name":"amount_output","type":"u64"},{"name":"patch_version","type":"u8"},{"name":"time_fulfill","type":"u64"},{"name":"flash_freeze","type":"bool"}]}},{"name":"UnlockFeeParams","type":{"kind":"struct","fields":[{"name":"payload_type","type":"u8"},{"name":"gas_drop","type":"u64"},{"name":"key_rnd","type":{"array":["u8",32]}}]}},{"name":"UnlockFeeWithRefineParams","type":{"kind":"struct","fields":[{"name":"payload_type","type":"u8"},{"name":"gas_drop_unlock","type":"u64"},{"name":"gas_drop_refine","type":"u64"},{"name":"addr_bad_unlocker","docs":["Who is redeems bridge locked fee with the lower gas_drop"],"type":{"array":["u8",32]}},{"name":"key_rnd","type":{"array":["u8",32]}}]}}]}