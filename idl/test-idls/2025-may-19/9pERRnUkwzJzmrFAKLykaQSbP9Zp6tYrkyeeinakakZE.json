{"version":"0.1.0","name":"infinity_pools","instructions":[{"name":"initializeFloatPool","accounts":[{"name":"authority","isMut":true,"isSigner":true},{"name":"floatPool","isMut":true,"isSigner":true},{"name":"whirlpool","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"floorRate","type":"u64"}]},{"name":"updateFloatPool","accounts":[{"name":"authority","isMut":true,"isSigner":true},{"name":"floatPool","isMut":true,"isSigner":false}],"args":[{"name":"newFloorRate","type":{"option":"u64"}}]},{"name":"initializeLoanPosition","accounts":[{"name":"whirlpool","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"tokenOwnerAccountA","isMut":true,"isSigner":false},{"name":"tokenOwnerAccountB","isMut":true,"isSigner":false},{"name":"tokenVaultA","isMut":true,"isSigner":false},{"name":"tokenVaultB","isMut":true,"isSigner":false},{"name":"tickArrayLower","isMut":true,"isSigner":false},{"name":"tickArrayUpper","isMut":true,"isSigner":false},{"name":"owner","isMut":true,"isSigner":true},{"name":"positionTokenAccount","isMut":true,"isSigner":false},{"name":"loanPosition","isMut":true,"isSigner":true},{"name":"floatPool","isMut":true,"isSigner":false},{"name":"whirlpoolProgram","isMut":false,"isSigner":false},{"name":"positionMint","isMut":false,"isSigner":false},{"name":"whirlpoolPosition","isMut":true,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"params","type":{"defined":"PositionParams"}},{"name":"bump","type":"u8"}]},{"name":"replenishLoanPosition","accounts":[{"name":"owner","isMut":true,"isSigner":true},{"name":"loanPosition","isMut":true,"isSigner":false},{"name":"floatPool","isMut":true,"isSigner":false},{"name":"interestPayment","isMut":true,"isSigner":false}],"args":[{"name":"newDeadline","type":"i64"}]},{"name":"closeLoanPosition","accounts":[{"name":"owner","isMut":true,"isSigner":true},{"name":"loanPosition","isMut":true,"isSigner":false},{"name":"floatPool","isMut":true,"isSigner":false},{"name":"whirlpool","isMut":false,"isSigner":false},{"name":"whirlpoolPosition","isMut":true,"isSigner":false},{"name":"interestPayment","isMut":true,"isSigner":false},{"name":"ownerTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"enterPositionWithSwap","accounts":[{"name":"loanPosition","isMut":true,"isSigner":false},{"name":"floatPool","isMut":true,"isSigner":false},{"name":"whirlpool","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"},{"name":"slippageTolerance","type":"u64"}]},{"name":"exitPositionWithSwap","accounts":[{"name":"loanPosition","isMut":true,"isSigner":false},{"name":"floatPool","isMut":true,"isSigner":false},{"name":"whirlpool","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"},{"name":"slippageTolerance","type":"u64"}]},{"name":"swapAtStrikePrice","accounts":[{"name":"loanPosition","isMut":true,"isSigner":false},{"name":"floatPool","isMut":true,"isSigner":false},{"name":"whirlpool","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"},{"name":"isExactInput","type":"bool"}]}],"accounts":[{"name":"FloatPool","type":{"kind":"struct","fields":[{"name":"whirlpool","type":"publicKey"},{"name":"tokenA","type":"publicKey"},{"name":"tokenB","type":"publicKey"},{"name":"tokenVaultA","type":"publicKey"},{"name":"tokenVaultB","type":"publicKey"},{"name":"totalLiquidity","type":"u128"},{"name":"borrowedLiquidity","type":"u128"},{"name":"floorRate","type":"u64"},{"name":"lastUpdateTimestamp","type":"i64"},{"name":"ranges","type":{"vec":{"defined":"LiquidityRangeInfo"}}},{"name":"minBaseRate","type":"u64"},{"name":"maxBaseRate","type":"u64"},{"name":"volatilityWindow","type":"u64"},{"name":"volatilityObservations","type":{"vec":{"defined":"(i64,u64)"}}},{"name":"protocolFeeRate","type":"u64"},{"name":"poolCreator","type":"publicKey"},{"name":"feeRecipient","type":"publicKey"},{"name":"creatorFeesA","type":"u64"},{"name":"creatorFeesB","type":"u64"},{"name":"protocolFeesA","type":"u64"},{"name":"protocolFeesB","type":"u64"}]}},{"name":"LoanPosition","type":{"kind":"struct","fields":[{"name":"owner","type":"publicKey"},{"name":"floatPool","type":"publicKey"},{"name":"whirlpoolPosition","type":"publicKey"},{"name":"style","type":{"defined":"LoanStyle"}},{"name":"amount","type":"u64"},{"name":"strikePrice","type":"u64"},{"name":"interestRate","type":"u64"},{"name":"interestRateTolerance","type":"u64"},{"name":"startTimestamp","type":"i64"},{"name":"maturityTimestamp","type":"i64"},{"name":"deadlineTimestamp","type":"i64"},{"name":"lockPeriod","type":"i64"},{"name":"unwindStartTimestamp","type":{"option":"i64"}},{"name":"unwindTargetTimestamp","type":{"option":"i64"}},{"name":"baseAmount","type":"u64"},{"name":"extraMargin","type":"u64"},{"name":"ranges","type":{"vec":{"defined":"(usize,u64)"}}},{"name":"lastSwapTimestamp","type":"i64"}]}}],"types":[{"name":"SwapQuote","type":{"kind":"struct","fields":[{"name":"amountIn","type":"u64"},{"name":"amountOut","type":"u64"},{"name":"feeAmount","type":"u64"},{"name":"priceImpact","type":"f64"},{"name":"path","type":{"vec":"publicKey"}}]}},{"name":"LiquidityRangeInfo","type":{"kind":"struct","fields":[{"name":"lowerTick","type":"i32"},{"name":"upperTick","type":"i32"},{"name":"liquidity","type":"u128"},{"name":"borrowedLiquidity","type":"u128"},{"name":"lastUpdateTimestamp","type":"i64"}]}},{"name":"PositionParams","type":{"kind":"struct","fields":[{"name":"style","type":{"defined":"LoanStyle"}},{"name":"amount","type":"u64"},{"name":"strikePrice","type":"u64"},{"name":"lockPeriod","type":"i64"},{"name":"deadlineSeconds","type":"i64"},{"name":"interestRateTolerance","type":"u64"},{"name":"unwindDuration","type":{"option":"i64"}},{"name":"maintainExposure","type":"bool"}]}},{"name":"ErrorCodes","type":{"kind":"enum","variants":[{"name":"InvalidParameters"},{"name":"InvalidSqrtPrice"},{"name":"InvalidStrikePrice"},{"name":"InvalidLeverage"},{"name":"InvalidTime"},{"name":"InvalidTickRange"},{"name":"MathOverflow"}]}},{"name":"LoanStyle","type":{"kind":"enum","variants":[{"name":"FixedTerm"},{"name":"Revolving"},{"name":"Periodic"}]}}],"errors":[{"code":6000,"name":"NoRouteFound","msg":"No valid swap route found"},{"code":6001,"name":"PoolNotFound","msg":"Pool not found"},{"code":6002,"name":"SlippageExceeded","msg":"Slippage tolerance exceeded"},{"code":6003,"name":"MathOverflow","msg":"Math overflow"}]}