{"address":"Fii8GURTsfPZrpBZNd99BRPMDztUUGm7Th1XfoANDHVh","metadata":{"name":"factory","version":"0.1.0","spec":"0.1.0","description":"Created with Anchor"},"instructions":[{"name":"add_mint_request","docs":["Merchant adds a new mint request"],"discriminator":[107,129,108,89,48,79,7,162],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"factory_store","writable":true,"pda":{"seeds":[{"kind":"const","value":[102,97,99,116,111,114,121]}]}},{"name":"request_account","writable":true,"pda":{"seeds":[{"kind":"const","value":[109,105,110,116,95,114,101,113,117,101,115,116]},{"kind":"account","path":"factory_store.mint_request_counter","account":"FactoryStore"}]}},{"name":"controller_store"},{"name":"merchant_info"},{"name":"custodian_btc_address","pda":{"seeds":[{"kind":"const","value":[99,117,115,116,111,100,105,97,110,95,98,116,99,95,97,100,100,114,101,115,115]},{"kind":"account","path":"payer"}]}},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"params","type":{"defined":{"name":"MintParams"}}}]},{"name":"burn","docs":["Merchant initiates a burn request"],"discriminator":[116,110,29,56,107,219,42,93],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"factory_store","writable":true,"pda":{"seeds":[{"kind":"const","value":[102,97,99,116,111,114,121]}]}},{"name":"request_account","writable":true,"pda":{"seeds":[{"kind":"const","value":[98,117,114,110,95,114,101,113,117,101,115,116]},{"kind":"account","path":"factory_store.burn_request_counter","account":"FactoryStore"}]}},{"name":"controller_store"},{"name":"merchant_info"},{"name":"merchant_btc_address","pda":{"seeds":[{"kind":"const","value":[109,101,114,99,104,97,110,116,95,98,116,99,95,97,100,100,114,101,115,115]},{"kind":"account","path":"payer"}]}},{"name":"token_mint","writable":true},{"name":"token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"payer"},{"kind":"account","path":"token_program"},{"kind":"account","path":"token_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"token_program"},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"params","type":{"defined":{"name":"BurnParams"}}}]},{"name":"cancel_mint_request","docs":["Merchant cancels a mint request"],"discriminator":[205,221,171,133,255,228,236,205],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"factory_store","pda":{"seeds":[{"kind":"const","value":[102,97,99,116,111,114,121]}]}},{"name":"request_account","writable":true,"pda":{"seeds":[{"kind":"const","value":[109,105,110,116,95,114,101,113,117,101,115,116]},{"kind":"arg","path":"params.nonce"}]}}],"args":[{"name":"params","type":{"defined":{"name":"CancelMintParams"}}}]},{"name":"confirm_burn_request","docs":["Custodian confirms burn request, writing the final btcTxid"],"discriminator":[91,161,19,218,246,29,150,157],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"factory_store","pda":{"seeds":[{"kind":"const","value":[102,97,99,116,111,114,121]}]}},{"name":"request_account","writable":true,"pda":{"seeds":[{"kind":"const","value":[98,117,114,110,95,114,101,113,117,101,115,116]},{"kind":"arg","path":"params.nonce"}]}},{"name":"controller_store"},{"name":"members_store"}],"args":[{"name":"params","type":{"defined":{"name":"ConfirmBurnParams"}}}]},{"name":"confirm_mint_request","docs":["Custodian confirms mint request and mints tokens to the specified user's token account (CPI call to controller::mint)"],"discriminator":[185,178,247,40,16,67,73,35],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"factory_store","pda":{"seeds":[{"kind":"const","value":[102,97,99,116,111,114,121]}]}},{"name":"controller_store"},{"name":"members_store"},{"name":"request_account","writable":true,"pda":{"seeds":[{"kind":"const","value":[109,105,110,116,95,114,101,113,117,101,115,116]},{"kind":"arg","path":"params.nonce"}]}},{"name":"token_mint","writable":true},{"name":"to_address"},{"name":"token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"to_address"},{"kind":"account","path":"token_program"},{"kind":"account","path":"token_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"controller_program","address":"657mUtzd2sXVVEixmWbkVGN1Fmw7qYLed26D7tYvNLzt"},{"name":"token_program"},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"params","type":{"defined":{"name":"ConfirmMintParams"}}}]},{"name":"initialize","discriminator":[175,175,109,31,13,152,155,237],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"factory_store","writable":true,"pda":{"seeds":[{"kind":"const","value":[102,97,99,116,111,114,121]}]}},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"params","type":{"defined":{"name":"InitializeParams"}}}]},{"name":"reject_mint_request","docs":["Custodian rejects mint request"],"discriminator":[95,142,147,85,22,230,95,158],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"factory_store","pda":{"seeds":[{"kind":"const","value":[102,97,99,116,111,114,121]}]}},{"name":"request_account","writable":true,"pda":{"seeds":[{"kind":"const","value":[109,105,110,116,95,114,101,113,117,101,115,116]},{"kind":"arg","path":"params.nonce"}]}},{"name":"controller_store"},{"name":"members_store"}],"args":[{"name":"params","type":{"defined":{"name":"RejectMintParams"}}}]},{"name":"set_custodian_btc_deposit_address","docs":["Custodian sets the BTC deposit address for a merchant (mint process)"],"discriminator":[20,244,229,5,171,71,83,196],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"factory_store","pda":{"seeds":[{"kind":"const","value":[102,97,99,116,111,114,121]}]}},{"name":"controller_store"},{"name":"members_store"},{"name":"merchant_info"},{"name":"custodian_btc_address","writable":true,"pda":{"seeds":[{"kind":"const","value":[99,117,115,116,111,100,105,97,110,95,98,116,99,95,97,100,100,114,101,115,115]},{"kind":"arg","path":"params.merchant"}]}},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"params","type":{"defined":{"name":"SetCustodianBtcDepositAddressParams"}}}]},{"name":"set_merchant_btc_deposit_address","docs":["Merchant sets their own BTC deposit address (burn process)"],"discriminator":[174,208,87,56,1,166,149,153],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"factory_store","pda":{"seeds":[{"kind":"const","value":[102,97,99,116,111,114,121]}]}},{"name":"controller_store"},{"name":"merchant_info"},{"name":"merchant_btc_address","writable":true,"pda":{"seeds":[{"kind":"const","value":[109,101,114,99,104,97,110,116,95,98,116,99,95,97,100,100,114,101,115,115]},{"kind":"account","path":"payer"}]}},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"params","type":{"defined":{"name":"SetMerchantBtcDepositAddressParams"}}}]}],"accounts":[{"name":"ControllerStore","discriminator":[240,240,178,44,100,253,114,89]},{"name":"CustodianBtcDepositAddress","discriminator":[233,24,143,85,185,81,131,7]},{"name":"FactoryStore","discriminator":[92,90,60,130,96,28,87,242]},{"name":"MembersStore","discriminator":[239,18,175,180,114,48,48,192]},{"name":"MerchantBtcDepositAddress","discriminator":[195,19,174,159,131,112,230,217]},{"name":"MerchantInfo","discriminator":[213,242,19,109,17,240,66,75]},{"name":"RequestAccount","discriminator":[108,23,6,158,184,6,152,121]}],"events":[{"name":"BurnConfirmed","discriminator":[2,243,150,205,159,112,212,145]},{"name":"Burned","discriminator":[207,37,251,154,239,229,14,67]},{"name":"CustodianBtcDepositAddressSet","discriminator":[28,15,238,115,143,59,116,195]},{"name":"MerchantBtcDepositAddressSet","discriminator":[134,161,245,35,12,133,170,78]},{"name":"MintConfirmed","discriminator":[199,159,125,247,72,13,4,1]},{"name":"MintRejected","discriminator":[21,112,77,100,147,142,93,92]},{"name":"MintRequestAdd","discriminator":[164,195,103,62,106,229,246,178]},{"name":"MintRequestCancel","discriminator":[195,228,173,165,125,101,71,59]}],"errors":[{"code":6000,"name":"Unauthorized","msg":"Unauthorized."},{"code":6001,"name":"InvalidBtcAddress","msg":"Invalid BTC deposit address."},{"code":6002,"name":"NotMerchant","msg":"Caller is not a merchant."},{"code":6003,"name":"NotCustodian","msg":"Caller is not a custodian."},{"code":6004,"name":"WrongBtcDepositAddress","msg":"Wrong BTC deposit address."},{"code":6005,"name":"ZeroRequestHash","msg":"Request hash cannot be zero."},{"code":6006,"name":"InvalidRequestHash","msg":"No such request hash."},{"code":6007,"name":"InvalidNonce","msg":"Nonce out of range."},{"code":6008,"name":"NotPendingRequest","msg":"Request is not pending."},{"code":6009,"name":"MismatchRequestHash","msg":"Mismatch request hash."},{"code":6010,"name":"NotRequestInitiator","msg":"Cancel sender is not the request initiator."},{"code":6011,"name":"InvalidFactoryAddress","msg":"Invalid factory address."},{"code":6012,"name":"InvalidRequestType","msg":"Invalid request type."},{"code":6013,"name":"InvalidMembersProgram","msg":"Invalid members program."},{"code":6014,"name":"InvalidToAddress","msg":"Invalid to address."},{"code":6015,"name":"InvalidTokenMint","msg":"Invalid token mint."},{"code":6016,"name":"InvalidControllerStore","msg":"Invalid controller store."},{"code":6017,"name":"InvalidTokenProgram","msg":"Invalid token program."},{"code":6018,"name":"InvalidTokenAccountOwner","msg":"Invalid token account owner."},{"code":6019,"name":"InvalidMembersStore","msg":"Invalid members store."},{"code":6020,"name":"InvalidMerchant","msg":"Invalid merchant."},{"code":6021,"name":"InvalidAmount","msg":"Invalid amount."},{"code":6022,"name":"InvalidBtcDepositAddress","msg":"Invalid btc deposit address."},{"code":6023,"name":"InvalidAddressCharacters","msg":"the address contains invalid (non-ascii) characters"},{"code":6024,"name":"InvalidTransactionCharacters","msg":"the transaction contains invalid (non-ascii) characters"},{"code":6025,"name":"InvalidTransactionLength","msg":"the transaction length is invalid (not 64 characters)"}],"types":[{"name":"BurnConfirmed","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"requester","type":"pubkey"},{"name":"amount","type":"u64"},{"name":"btc_deposit_address","type":"string"},{"name":"btc_txid","type":"string"},{"name":"timestamp","type":"i64"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"BurnParams","type":{"kind":"struct","fields":[{"name":"amount","type":"u64"}]}},{"name":"Burned","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"requester","type":"pubkey"},{"name":"amount","type":"u64"},{"name":"btc_deposit_address","type":"string"},{"name":"timestamp","type":"i64"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"CancelMintParams","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"ConfirmBurnParams","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"btc_txid","type":"string"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"ConfirmMintParams","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"ControllerStore","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"token_mint","type":"pubkey"},{"name":"members","type":"pubkey"},{"name":"factory","type":"pubkey"},{"name":"owner","type":"pubkey"},{"name":"pending_owner","type":"pubkey"},{"name":"pending_mint_authority","type":"pubkey"}]}},{"name":"CustodianBtcDepositAddress","type":{"kind":"struct","fields":[{"name":"merchant","type":"pubkey"},{"name":"btc_address","type":"string"},{"name":"bump","type":"u8"}]}},{"name":"CustodianBtcDepositAddressSet","type":{"kind":"struct","fields":[{"name":"merchant","type":"pubkey"},{"name":"custodian","type":"pubkey"},{"name":"btc_deposit_address","type":"string"}]}},{"name":"FactoryStore","type":{"kind":"struct","fields":[{"name":"mint_request_counter","type":"u64"},{"name":"burn_request_counter","type":"u64"},{"name":"controller","type":"pubkey"},{"name":"bump","type":"u8"}]}},{"name":"InitializeParams","type":{"kind":"struct","fields":[{"name":"controller","type":"pubkey"}]}},{"name":"MembersStore","type":{"kind":"struct","fields":[{"name":"owner","type":"pubkey"},{"name":"custodian","type":"pubkey"},{"name":"merchant_count","type":"u16"},{"name":"pending_owner","type":"pubkey"},{"name":"bump","type":"u8"}]}},{"name":"MerchantBtcDepositAddress","type":{"kind":"struct","fields":[{"name":"merchant","type":"pubkey"},{"name":"btc_address","type":"string"},{"name":"bump","type":"u8"}]}},{"name":"MerchantBtcDepositAddressSet","type":{"kind":"struct","fields":[{"name":"merchant","type":"pubkey"},{"name":"btc_deposit_address","type":"string"}]}},{"name":"MerchantInfo","type":{"kind":"struct","fields":[{"name":"merchant","type":"pubkey"},{"name":"bump","type":"u8"}]}},{"name":"MintConfirmed","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"requester","type":"pubkey"},{"name":"amount","type":"u64"},{"name":"btc_deposit_address","type":"string"},{"name":"btc_txid","type":"string"},{"name":"timestamp","type":"i64"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"MintParams","type":{"kind":"struct","fields":[{"name":"amount","type":"u64"},{"name":"btc_txid","type":"string"},{"name":"btc_deposit_address","type":"string"}]}},{"name":"MintRejected","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"requester","type":"pubkey"},{"name":"amount","type":"u64"},{"name":"btc_deposit_address","type":"string"},{"name":"btc_txid","type":"string"},{"name":"timestamp","type":"i64"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"MintRequestAdd","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"requester","type":"pubkey"},{"name":"amount","type":"u64"},{"name":"btc_deposit_address","type":"string"},{"name":"btc_txid","type":"string"},{"name":"timestamp","type":"i64"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"MintRequestCancel","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"requester","type":"pubkey"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"RejectMintParams","type":{"kind":"struct","fields":[{"name":"nonce","type":"u64"},{"name":"request_hash","type":{"array":["u8",32]}}]}},{"name":"RequestAccount","type":{"kind":"struct","fields":[{"name":"request_type","type":{"defined":{"name":"RequestType"}}},{"name":"requester","type":"pubkey"},{"name":"amount","type":"u64"},{"name":"btc_deposit_address","type":"string"},{"name":"btc_txid","type":"string"},{"name":"nonce","type":"u64"},{"name":"timestamp","type":"i64"},{"name":"status","type":{"defined":{"name":"RequestStatus"}}},{"name":"hash","type":{"array":["u8",32]}},{"name":"bump","type":"u8"}]}},{"name":"RequestStatus","type":{"kind":"enum","variants":[{"name":"Pending"},{"name":"Canceled"},{"name":"Approved"},{"name":"Rejected"}]}},{"name":"RequestType","type":{"kind":"enum","variants":[{"name":"Mint"},{"name":"Burn"}]}},{"name":"SetCustodianBtcDepositAddressParams","type":{"kind":"struct","fields":[{"name":"merchant","type":"pubkey"},{"name":"btc_deposit_address","type":"string"}]}},{"name":"SetMerchantBtcDepositAddressParams","type":{"kind":"struct","fields":[{"name":"btc_deposit_address","type":"string"}]}}]}