{"version":"0.1.0","name":"reward_distributor","instructions":[{"name":"createDistributor","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"vault","isMut":true,"isSigner":false},{"name":"rewardsMint","isMut":false,"isSigner":false},{"name":"circuitBreaker","isMut":true,"isSigner":false},{"name":"realm","isMut":false,"isSigner":false,"docs":["An spl-governance realm","","realm is validated in the instruction:","- realm is owned by the governance_program_id","- realm_authority is realm.authority"]},{"name":"realmAuthority","isMut":false,"isSigner":true},{"name":"governanceProgramId","isMut":false,"isSigner":false,"docs":["The program id of the spl-governance program the realm belongs to."]},{"name":"circuitBreakerProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"args","type":{"defined":"CreateDistributorArgs"}}]},{"name":"createDistributionTree","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"distributionTree","isMut":true,"isSigner":false},{"name":"distributor","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"reportOracle","accounts":[{"name":"distributor","isMut":false,"isSigner":false},{"name":"distributionTree","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"args","type":{"defined":"ReportOracleArgs"}}]},{"name":"activateDistributionTree","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"distributionTree","isMut":false,"isSigner":false}],"args":[]},{"name":"claimRewards","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"distributor","isMut":false,"isSigner":false},{"name":"distributionTree","isMut":false,"isSigner":false},{"name":"canopyData","isMut":false,"isSigner":false},{"name":"recipient","isMut":true,"isSigner":false},{"name":"rewardsMint","isMut":false,"isSigner":false},{"name":"vault","isMut":true,"isSigner":false},{"name":"circuitBreaker","isMut":true,"isSigner":false},{"name":"owner","isMut":false,"isSigner":false},{"name":"destinationAccount","isMut":true,"isSigner":false},{"name":"merkleTree","isMut":false,"isSigner":false},{"name":"compressionProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"circuitBreakerProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"args","type":{"defined":"ClaimRewardsArgs"}}]},{"name":"updateDistributor","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"realmAuthority","isMut":false,"isSigner":true}],"args":[{"name":"args","type":{"defined":"UpdateDistributorArgs"}}]},{"name":"createCanopy","accounts":[{"name":"payer","isMut":true,"isSigner":true},{"name":"canopy","isMut":true,"isSigner":false},{"name":"canopyData","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"setCanopyData","accounts":[{"name":"canopy","isMut":false,"isSigner":false},{"name":"canopyData","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"args","type":{"defined":"SetCanopyDataArgs"}}]},{"name":"closeCanopy","accounts":[{"name":"canopy","isMut":true,"isSigner":false},{"name":"canopyData","isMut":true,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"Distributor","type":{"kind":"struct","fields":[{"name":"realm","type":"publicKey"},{"name":"realmAuthority","type":"publicKey"},{"name":"rewardsMint","type":"publicKey"},{"name":"vault","type":"publicKey"},{"name":"name","type":"string"},{"name":"authority","type":"publicKey"},{"name":"oracles","type":{"vec":"publicKey"}},{"name":"currentPeriod","type":"u32"},{"name":"bump","type":"u8"}]}},{"name":"DistributionTree","type":{"kind":"struct","fields":[{"name":"distributor","type":"publicKey"},{"name":"period","type":"u32"},{"name":"oracleReports","type":{"vec":{"option":{"defined":"OracleReport"}}}},{"name":"bump","type":"u8"}]}},{"name":"Canopy","type":{"kind":"struct","fields":[{"name":"canopyData","type":"publicKey"},{"name":"authority","type":"publicKey"}]}},{"name":"Recipient","type":{"kind":"struct","fields":[{"name":"distributor","type":"publicKey"},{"name":"asset","type":"publicKey"},{"name":"claimedRewards","type":"u64"},{"name":"lastClaimPeriod","type":"u32"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"WindowedCircuitBreakerConfigV0","type":{"kind":"struct","fields":[{"name":"windowSizeSeconds","type":"u64"},{"name":"thresholdType","type":{"defined":"ThresholdType"}},{"name":"threshold","type":"u64"}]}},{"name":"CompressedNftVerification","type":{"kind":"struct","fields":[{"name":"root","type":{"array":["u8",32]}},{"name":"index","type":"u32"},{"name":"dataHash","type":{"array":["u8",32]}},{"name":"creatorHash","type":{"array":["u8",32]}},{"name":"proofSize","type":"u32"}]}},{"name":"DistributionVerification","type":{"kind":"struct","fields":[{"name":"index","type":"u32"},{"name":"witnessRoot","type":{"array":["u8",32]}},{"name":"currentPeriodRewards","type":"u64"},{"name":"totalRewards","type":"u64"}]}},{"name":"ClaimRewardsArgs","type":{"kind":"struct","fields":[{"name":"compressedNftArgs","type":{"defined":"CompressedNftVerification"}},{"name":"distributionArgs","type":{"defined":"DistributionVerification"}}]}},{"name":"CreateDistributorArgs","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"authority","type":"publicKey"},{"name":"oracles","type":{"vec":"publicKey"}},{"name":"circuitBreakerConfig","type":{"defined":"WindowedCircuitBreakerConfigV0"}}]}},{"name":"ReportOracleArgs","type":{"kind":"struct","fields":[{"name":"index","type":"u32"},{"name":"report","type":{"defined":"OracleReport"}}]}},{"name":"SetCanopyDataArgs","type":{"kind":"struct","fields":[{"name":"offset","type":"u32"},{"name":"bytes","type":"bytes"}]}},{"name":"UpdateDistributorArgs","type":{"kind":"struct","fields":[{"name":"authority","type":{"option":"publicKey"}},{"name":"oracles","type":{"option":{"vec":"publicKey"}}}]}},{"name":"OracleReport","type":{"kind":"struct","fields":[{"name":"root","type":{"array":["u8",32]}},{"name":"maxDepth","type":"u32"}]}},{"name":"ThresholdType","type":{"kind":"enum","variants":[{"name":"Percent"},{"name":"Absolute"}]}},{"name":"Node","type":{"kind":"alias","value":{"array":["u8",32]}}}],"events":[{"name":"ClaimRewardsEvent","fields":[{"name":"distributor","type":"publicKey","index":false},{"name":"asset","type":"publicKey","index":false},{"name":"owner","type":"publicKey","index":false},{"name":"period","type":"u32","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":6000,"name":"Authorization","msg":""},{"code":6001,"name":"InvalidAsset","msg":""},{"code":6002,"name":"InvalidDistributionProof","msg":""},{"code":6003,"name":"InvalidRecipient","msg":""},{"code":6004,"name":"AlreadyClaimedPeriod","msg":""},{"code":6005,"name":"InvalidRealmAuthority","msg":""},{"code":6006,"name":"InvalidCanopyLength","msg":""},{"code":6007,"name":"IllegalPeriod","msg":""},{"code":6008,"name":"InvalidDistributorName","msg":""},{"code":6009,"name":"OraclesCountExceeds","msg":""},{"code":6010,"name":"InvalidOracleReport","msg":""},{"code":6011,"name":"CannotReportAtPresent","msg":""},{"code":6012,"name":"OracleReportsNotAvailable","msg":""},{"code":6013,"name":"DistributionTreeNotActivated","msg":""}]}