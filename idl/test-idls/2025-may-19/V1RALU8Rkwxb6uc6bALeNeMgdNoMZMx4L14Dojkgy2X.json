{"address":"V1RALU8Rkwxb6uc6bALeNeMgdNoMZMx4L14Dojkgy2X","metadata":{"name":"raffle_program","version":"0.1.0","spec":"0.1.0","description":"ViralVault Raffle Program"},"instructions":[{"name":"buy_tickets","discriminator":[48,16,122,137,24,214,198,58],"accounts":[{"name":"raffle","docs":["The raffle account that tickets are being purchased for","Must be in Open state and not past end time"],"writable":true},{"name":"entry","docs":["New entry account created for this purchase","PDA with empty seeds"],"writable":true,"pda":{"seeds":[{"kind":"const","value":[101,110,116,114,121]},{"kind":"account","path":"raffle"},{"kind":"arg","path":"entry_seed"}]}},{"name":"ticket_balance","docs":["User's ticket balance account","PDA with seeds [\"ticket_balance\", raffle_key, signer_key]"],"writable":true,"pda":{"seeds":[{"kind":"const","value":[116,105,99,107,101,116,95,98,97,108,97,110,99,101]},{"kind":"account","path":"raffle"},{"kind":"account","path":"signer"}]}},{"name":"signer","docs":["The account purchasing tickets and paying for the entry account"],"writable":true,"signer":true},{"name":"system_program","docs":["Required for creating the entry account"],"address":"11111111111111111111111111111111"},{"name":"treasury","docs":["Treasury account that receives payment for tickets","PDA with seeds [\"treasury\", raffle_key]"],"writable":true,"pda":{"seeds":[{"kind":"const","value":[116,114,101,97,115,117,114,121]},{"kind":"account","path":"raffle"}]}}],"args":[{"name":"ticket_count","type":"u64"},{"name":"entry_seed","type":{"array":["u8",8]}}]},{"name":"create_raffle","discriminator":[226,206,159,34,213,207,98,126],"accounts":[{"name":"raffle","writable":true,"pda":{"seeds":[{"kind":"const","value":[114,97,102,102,108,101]},{"kind":"account","path":"config.raffle_counter","account":"Config"}]}},{"name":"management_authority","writable":true,"signer":true,"relations":["config"]},{"name":"treasury","writable":true,"pda":{"seeds":[{"kind":"const","value":[116,114,101,97,115,117,114,121]},{"kind":"account","path":"raffle"}]}},{"name":"config","docs":["The config account storing upgrade, management and payout authorities, and raffle counter"],"writable":true,"pda":{"seeds":[{"kind":"const","value":[99,111,110,102,105,103]}]}},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"metadata_uri","type":"string"},{"name":"ticket_price","type":"u64"},{"name":"end_time","type":"i64"},{"name":"min_tickets","type":"u64"},{"name":"max_tickets","type":{"option":"u64"}}]},{"name":"draw_winning_ticket","discriminator":[234,168,157,125,21,221,251,89],"accounts":[{"name":"raffle","docs":["The raffle account to draw a winner for.","Must be in Open state, past end time, and have met minimum ticket threshold"],"writable":true},{"name":"recent_slothashes","docs":["The SlotHashes sysvar contains the most recent block hashes","This is used as a source of randomness","This is needed because Anchor will always throw an error on the SlotHashes sysvar."]}],"args":[]},{"name":"expire_raffle","discriminator":[132,3,226,39,78,117,109,109],"accounts":[{"name":"raffle","writable":true}],"args":[]},{"name":"init_config","discriminator":[23,235,115,232,168,96,1,231],"accounts":[{"name":"config","writable":true,"pda":{"seeds":[{"kind":"const","value":[99,111,110,102,105,103]}]}},{"name":"upgrade_authority","writable":true,"signer":true},{"name":"payout_authority"},{"name":"management_authority"},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[]},{"name":"init_ticket_balance","discriminator":[130,109,17,177,45,85,206,225],"accounts":[{"name":"signer","writable":true,"signer":true},{"name":"ticket_balance","writable":true,"pda":{"seeds":[{"kind":"const","value":[116,105,99,107,101,116,95,98,97,108,97,110,99,101]},{"kind":"account","path":"raffle"},{"kind":"account","path":"signer"}]}},{"name":"raffle"},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[]},{"name":"reclaim_expired_tickets","discriminator":[19,51,44,196,59,200,63,128],"accounts":[{"name":"signer","docs":["The user reclaiming their tickets"],"writable":true,"signer":true},{"name":"ticket_balance","docs":["Ticket balance PDA for this user in this raffle","Account is closed and rent is reclaimed"],"writable":true,"pda":{"seeds":[{"kind":"const","value":[116,105,99,107,101,116,95,98,97,108,97,110,99,101]},{"kind":"account","path":"raffle"},{"kind":"account","path":"signer"}]}},{"name":"raffle","docs":["The raffle account that must be in Expired state"]},{"name":"system_program","docs":["Required by Anchor for transfers"],"address":"11111111111111111111111111111111"},{"name":"treasury","docs":["Treasury PDA for this raffle that holds the funds"],"writable":true,"pda":{"seeds":[{"kind":"const","value":[116,114,101,97,115,117,114,121]},{"kind":"account","path":"raffle"}]}}],"args":[]},{"name":"set_winner","discriminator":[207,149,39,13,31,233,182,109],"accounts":[{"name":"raffle","docs":["The raffle account to set the winner for.","Must be in Drawing state and have a winning ticket drawn"],"writable":true},{"name":"entry","docs":["The entry account that contains the winning ticket","PDA with empty seeds"],"pda":{"seeds":[{"kind":"const","value":[101,110,116,114,121]},{"kind":"account","path":"raffle"},{"kind":"arg","path":"entry_seed"}]}}],"args":[{"name":"entry_seed","type":{"array":["u8",8]}}]},{"name":"submit_winner_data","discriminator":[96,3,193,37,15,219,125,139],"accounts":[{"name":"raffle","docs":["The raffle account that must be in Drawn state","Must have the signer as the designated winner"],"writable":true},{"name":"winner_data","docs":["New PDA to store winner's encrypted contact information"],"writable":true,"pda":{"seeds":[{"kind":"const","value":[119,105,110,110,101,114,95,100,97,116,97]},{"kind":"account","path":"raffle"},{"kind":"account","path":"signer"}]}},{"name":"signer","docs":["The winner submitting their contact information","Must match the winner_address stored in the raffle account"],"writable":true,"signer":true},{"name":"system_program","docs":["Required by Anchor for account creation"],"address":"11111111111111111111111111111111"}],"args":[{"name":"data","type":"string"}]},{"name":"withdraw_from_treasury","discriminator":[0,164,86,76,56,72,12,170],"accounts":[{"name":"raffle"},{"name":"management_authority","writable":true,"signer":true,"relations":["config"]},{"name":"treasury","writable":true,"pda":{"seeds":[{"kind":"const","value":[116,114,101,97,115,117,114,121]},{"kind":"account","path":"raffle"}]}},{"name":"config","writable":true,"pda":{"seeds":[{"kind":"const","value":[99,111,110,102,105,103]}]}},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"payout_authority","writable":true,"relations":["config"]}],"args":[]}],"accounts":[{"name":"Config","discriminator":[155,12,170,224,30,250,204,130]},{"name":"Entry","discriminator":[63,18,152,113,215,246,221,250]},{"name":"Raffle","discriminator":[143,133,63,173,138,10,142,200]},{"name":"TicketBalance","discriminator":[228,242,223,38,51,10,38,28]},{"name":"Treasury","discriminator":[238,239,123,238,89,1,168,253]},{"name":"WinnerData","discriminator":[45,20,105,126,134,28,6,102]}],"events":[{"name":"RaffleCreated","discriminator":[178,172,201,96,233,171,6,99]},{"name":"RaffleExpired","discriminator":[68,152,219,38,63,194,39,27]},{"name":"TicketsPurchased","discriminator":[185,114,111,225,124,92,18,143]},{"name":"TreasuryWithdrawn","discriminator":[143,181,157,169,87,155,170,46]},{"name":"WinnerDataSubmitted","discriminator":[2,12,237,109,114,190,35,200]},{"name":"WinnerSet","discriminator":[126,40,173,69,22,114,226,237]}],"errors":[{"code":6000,"name":"Overflow"},{"code":6001,"name":"MetadataUriTooLong"},{"code":6002,"name":"TicketPriceTooLow"},{"code":6003,"name":"MinTicketsTooLow"},{"code":6004,"name":"InvalidTicketCount"},{"code":6005,"name":"InsufficientFunds"},{"code":6006,"name":"RaffleNotOpen"},{"code":6007,"name":"InvalidTreasury"},{"code":6008,"name":"RaffleNotExpired"},{"code":6009,"name":"OwnerMismatch"},{"code":6010,"name":"ThresholdIsMet"},{"code":6011,"name":"NoTicketsOwned"},{"code":6012,"name":"NotProgramManagementAuthority","msg":"Only the program management authority can create raffles"},{"code":6013,"name":"NotPayoutAuthority","msg":"Only the payout authority may be used to withdraw from the treasury"},{"code":6014,"name":"TicketPriceTooHigh","msg":"Ticket price exceeds maximum allowed"},{"code":6015,"name":"MinTicketsTooHigh","msg":"Minimum tickets exceeds maximum allowed"},{"code":6016,"name":"DurationTooLong","msg":"Raffle duration exceeds maximum allowed"},{"code":6017,"name":"InvalidMetadataUri","msg":"Invalid metadata URI format"},{"code":6018,"name":"EndTimeTooClose","msg":"End time must be at least 1 hour in the future"},{"code":6019,"name":"TicketBalanceNotInitialized","msg":"Ticket balance account is not initialized for this user"},{"code":6020,"name":"TransferFailed","msg":"Treasury transfer failed"},{"code":6021,"name":"RaffleEnded","msg":"Raffle has ended"},{"code":6022,"name":"RaffleNotEnded","msg":"Raffle has not ended yet"},{"code":6023,"name":"InsufficientTickets","msg":"Insufficient tickets sold"},{"code":6024,"name":"InvalidSlotHashesAccount","msg":"Invalid SlotHashes account provided"},{"code":6025,"name":"RaffleNotDrawing","msg":"Raffle is not in Drawing state"},{"code":6026,"name":"NoWinningTicket","msg":"No winning ticket has been drawn"},{"code":6027,"name":"InvalidWinningEntry","msg":"Entry does not contain the winning ticket"},{"code":6028,"name":"RaffleNotDrawn","msg":"The raffle has not been drawn yet"},{"code":6029,"name":"NotWinner","msg":"Only the winner can submit data"},{"code":6030,"name":"InvalidDataLength","msg":"Encrypted username exceeds maximum length of 1024 bytes"},{"code":6031,"name":"ThresholdNotMet","msg":"Minimum ticket threshold is not met"},{"code":6032,"name":"MaximumTicketsSold","msg":"All available tickets have been sold"},{"code":6033,"name":"PurchaseExceedsThreshold","msg":"Executing this purchase would exceed the maximum threshold. Please buy fewer tickets."},{"code":6034,"name":"MaxTicketsTooLow","msg":"Max tickets must be greater than min tickets"}],"types":[{"name":"Config","type":{"kind":"struct","fields":[{"name":"payout_authority","type":"pubkey"},{"name":"management_authority","type":"pubkey"},{"name":"upgrade_authority","type":"pubkey"},{"name":"bump","type":"u8"},{"name":"raffle_counter","type":"u64"}]}},{"name":"Entry","type":{"kind":"struct","fields":[{"name":"raffle","type":"pubkey"},{"name":"owner","type":"pubkey"},{"name":"ticket_count","type":"u64"},{"name":"ticket_start_index","type":"u64"},{"name":"seed","type":{"array":["u8",8]}}]}},{"name":"Raffle","type":{"kind":"struct","fields":[{"name":"treasury","type":"pubkey"},{"name":"metadata_uri","type":"string"},{"name":"ticket_price","type":"u64"},{"name":"current_tickets","type":"u64"},{"name":"min_tickets","type":"u64"},{"name":"max_tickets","type":{"option":"u64"}},{"name":"creation_time","type":"i64"},{"name":"end_time","type":"i64"},{"name":"raffle_state","type":{"defined":{"name":"RaffleState"}}},{"name":"winner_address","type":{"option":"pubkey"}},{"name":"winning_ticket","type":{"option":"u64"}}]}},{"name":"RaffleCreated","docs":["Event emitted when a raffle is created"],"type":{"kind":"struct","fields":[{"name":"raffle","docs":["The pubkey of the created raffle"],"type":"pubkey"},{"name":"metadata_uri","docs":["The metadata URI for the raffle"],"type":"string"},{"name":"ticket_price","docs":["Price per ticket in lamports"],"type":"u64"},{"name":"min_tickets","docs":["Minimum number of tickets required"],"type":"u64"},{"name":"end_time","docs":["When the raffle ends"],"type":"i64"},{"name":"creation_time","docs":["When the raffle was created"],"type":"i64"}]}},{"name":"RaffleExpired","docs":["Event emitted when a raffle is expired"],"type":{"kind":"struct","fields":[{"name":"raffle","docs":["The pubkey of the expired raffle"],"type":"pubkey"},{"name":"expired_at","docs":["The timestamp when the raffle was expired"],"type":"i64"},{"name":"final_ticket_count","docs":["The final number of tickets sold"],"type":"u64"}]}},{"name":"RaffleState","type":{"kind":"enum","variants":[{"name":"Open"},{"name":"Drawing"},{"name":"Drawn"},{"name":"Expired"},{"name":"Claimed"}]}},{"name":"TicketBalance","type":{"kind":"struct","fields":[{"name":"owner","type":"pubkey"},{"name":"ticket_count","type":"u64"},{"name":"bump","type":"u8"}]}},{"name":"TicketsPurchased","docs":["Event emitted when tickets are purchased"],"type":{"kind":"struct","fields":[{"name":"raffle","docs":["The pubkey of the raffle"],"type":"pubkey"},{"name":"buyer","docs":["The buyer's address"],"type":"pubkey"},{"name":"ticket_count","docs":["Number of tickets purchased"],"type":"u64"},{"name":"payment_amount","docs":["Total amount paid in lamports"],"type":"u64"},{"name":"ticket_start_index","docs":["Starting ticket index for this purchase"],"type":"u64"},{"name":"entry_seed","docs":["The seed that was used to create the entry"],"type":{"array":["u8",8]}}]}},{"name":"Treasury","type":{"kind":"struct","fields":[{"name":"raffle","type":"pubkey"},{"name":"bump","type":"u8"}]}},{"name":"TreasuryWithdrawn","docs":["Event emitted when treasury funds are withdrawn"],"type":{"kind":"struct","fields":[{"name":"raffle","docs":["The pubkey of the raffle"],"type":"pubkey"},{"name":"amount","docs":["Amount withdrawn in lamports"],"type":"u64"}]}},{"name":"WinnerData","type":{"kind":"struct","fields":[{"name":"data","type":"string"}]}},{"name":"WinnerDataSubmitted","docs":["Event emitted when a winner submits their encrypted data"],"type":{"kind":"struct","fields":[{"name":"raffle","docs":["The pubkey of the raffle"],"type":"pubkey"}]}},{"name":"WinnerSet","docs":["Event emitted when a winner is set for a raffle"],"type":{"kind":"struct","fields":[{"name":"raffle","docs":["The pubkey of the raffle"],"type":"pubkey"},{"name":"winner","docs":["The winner's address"],"type":"pubkey"},{"name":"winning_ticket","docs":["The winning ticket number"],"type":"u64"}]}}]}