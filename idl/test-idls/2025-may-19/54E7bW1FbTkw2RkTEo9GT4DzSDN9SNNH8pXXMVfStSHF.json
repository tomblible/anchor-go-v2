{"version":"0.1.0","name":"nfting","instructions":[{"name":"initialize","docs":["Initialize the rarity checker for a specific merkle tree"],"accounts":[{"name":"state","isMut":true,"isSigner":false},{"name":"merkleTree","isMut":false,"isSigner":false},{"name":"merkleTreeAccount","isMut":false,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"feeReceiver","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"rarityThresholds","type":"bytes"}]},{"name":"updateRarityData","docs":["Add or update rarity data for mint indices by directly fetching from the IPFS gateway"],"accounts":[{"name":"state","isMut":true,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"merkleTree","isMut":true,"isSigner":false},{"name":"feeReceiver","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"startIndex","type":"u64"},{"name":"rarityData","type":"bytes"}]},{"name":"validateMint","docs":["Predict the next Bubblegum mint index and validate that it meets the rarity threshold"],"accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"merkleTree","isMut":false,"isSigner":false,"docs":["The merkle tree account"]},{"name":"treeConfig","isMut":false,"isSigner":false,"docs":["The tree config account to get the current mint count"]},{"name":"minter","isMut":true,"isSigner":true},{"name":"feeReceiver","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"mintIndex","type":{"option":"u64"}},{"name":"minRarityPercentage","type":"u8"}]},{"name":"analyzeMintTransaction","docs":["Analyze a completed Menagerie mint transaction to extract mint details, metadata URI,","and track mint patterns for analytics"],"accounts":[{"name":"state","isMut":true,"isSigner":false},{"name":"merkleTree","isMut":false,"isSigner":false,"docs":["The merkle tree account"]},{"name":"treeConfig","isMut":false,"isSigner":false,"docs":["The tree config account to get the current mint count"]},{"name":"mintAccount","isMut":false,"isSigner":false},{"name":"metadataAccount","isMut":false,"isSigner":false},{"name":"transactionSender","isMut":false,"isSigner":false},{"name":"instructionsSysvar","isMut":false,"isSigner":false}],"args":[{"name":"txSignature","type":{"array":["u8",64]}},{"name":"expectedMintIndex","type":{"option":"u64"}}]},{"name":"getMintStatistics","docs":["Get statistics about mint patterns and rarity score distribution"],"accounts":[{"name":"state","isMut":false,"isSigner":false}],"args":[]},{"name":"validateMintCore","docs":["Validate a MintCore instruction by extracting URI data and checking the rarity"],"accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"merkleTree","isMut":false,"isSigner":false,"docs":["The merkle tree account"]},{"name":"minter","isMut":true,"isSigner":true},{"name":"assetAccount","isMut":false,"isSigner":false},{"name":"feeReceiver","isMut":true,"isSigner":false},{"name":"instructionsSysvar","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"expectedNftIndex","type":{"option":"u64"}},{"name":"minRarityPercentage","type":"u8"}]},{"name":"debugMintCoreInstruction","docs":["Debug instruction for analyzing Menagerie MintCore instructions"],"accounts":[{"name":"authority","isMut":true,"isSigner":true},{"name":"instructionsSysvar","isMut":false,"isSigner":false}],"args":[{"name":"targetSlot","type":{"option":"u64"}}]},{"name":"extractNftIndexFromLogs","docs":["Add an instruction to directly extract NFT index from MPL Core create instruction","by parsing the program data. This is useful when we can't reliably extract the","index from the instruction data."],"accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"merkleTree","isMut":false,"isSigner":false,"docs":["The merkle tree account"]},{"name":"minter","isMut":true,"isSigner":true},{"name":"feeReceiver","isMut":true,"isSigner":false},{"name":"instructionsSysvar","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"minRarityPercentage","type":"u8"}]}],"accounts":[{"name":"RarityState","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"merkleTree","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"maxDepth","type":"u16"},{"name":"maxBufferSize","type":"u16"},{"name":"rarityThresholds","type":"bytes"},{"name":"rarityMap","type":"bytes"},{"name":"totalMints","type":"u64"},{"name":"mintRecords","type":{"vec":{"defined":"MintRecord"}}},{"name":"mintPatterns","type":{"vec":{"defined":"MintPattern"}}}]}},{"name":"TreeConfig","type":{"kind":"struct","fields":[{"name":"treeCreator","type":"publicKey"},{"name":"treeDelegate","type":"publicKey"},{"name":"totalMintCapacity","type":"u64"},{"name":"numMinted","type":"u64"},{"name":"isPublic","type":"bool"}]}}],"types":[{"name":"MintRecord","type":{"kind":"struct","fields":[{"name":"mintIndex","type":{"option":"u64"}},{"name":"assetId","type":"publicKey"},{"name":"mintCount","type":"u64"},{"name":"rarityScore","type":{"option":"u8"}},{"name":"minter","type":"publicKey"},{"name":"timestamp","type":"i64"}]}},{"name":"MintPattern","type":{"kind":"struct","fields":[{"name":"difference","type":"u64"},{"name":"occurrences","type":"u64"},{"name":"probability","type":"f64"}]}}],"errors":[{"code":6000,"name":"RarityBelowThreshold","msg":"Rarity below specified threshold"},{"code":6001,"name":"IndexOutOfBounds","msg":"Mint index out of bounds"},{"code":6002,"name":"InvalidMerkleTree","msg":"Invalid merkle tree"},{"code":6003,"name":"NoRarityData","msg":"No rarity data available"},{"code":6004,"name":"MintTransactionAnalysisFailed","msg":"Mint transaction analysis failed"}]}