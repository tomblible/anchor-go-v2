// Code generated by https://github.com/gagliardetto/anchor-go. DO NOT EDIT.

package orca_whirlpool

import (
	"bytes"
	"fmt"
	binary "github.com/gagliardetto/binary"
	solanago "github.com/gagliardetto/solana-go"
	programparser "github.com/yydsqu/solana-sdk/program_parser"
)

// Builds a "two_hop_swap" instruction.

// Perform a two-hop swap in this Whirlpool
//
// ### Authority
// - "token_authority" - The authority to withdraw tokens from the input token account.
//
// ### Parameters
// - `amount` - The amount of input or output token to swap from (depending on amount_specified_is_input).
// - `other_amount_threshold` - The maximum/minimum of input/output token to swap into (depending on amount_specified_is_input).
// - `amount_specified_is_input` - Specifies the token the parameter `amount`represents. If true, the amount represents the input token of the swap.
// - `a_to_b_one` - The direction of the swap of hop one. True if swapping from A to B. False if swapping from B to A.
// - `a_to_b_two` - The direction of the swap of hop two. True if swapping from A to B. False if swapping from B to A.
// - `sqrt_price_limit_one` - The maximum/minimum price the swap will swap to in the first hop.
// - `sqrt_price_limit_two` - The maximum/minimum price the swap will swap to in the second hop.
//
// #### Special Errors
// - `ZeroTradableAmount` - User provided parameter `amount` is 0.
// - `InvalidSqrtPriceLimitDirection` - User provided parameter `sqrt_price_limit` does not match the direction of the trade.
// - `SqrtPriceOutOfBounds` - User provided parameter `sqrt_price_limit` is over Whirlppool's max/min bounds for sqrt-price.
// - `InvalidTickArraySequence` - User provided tick-arrays are not in sequential order required to proceed in this trade direction.
// - `TickArraySequenceInvalidIndex` - The swap loop attempted to access an invalid array index during the query of the next initialized tick.
// - `TickArrayIndexOutofBounds` - The swap loop attempted to access an invalid array index during tick crossing.
// - `LiquidityOverflow` - Liquidity value overflowed 128bits during tick crossing.
// - `InvalidTickSpacing` - The swap pool was initialized with tick-spacing of 0.
// - `InvalidIntermediaryMint` - Error if the intermediary mint between hop one and two do not equal.
// - `DuplicateTwoHopPool` - Error if whirlpool one & two are the same pool.
type TwoHopSwap struct {
	// Params:
	Amount                 uint64
	OtherAmountThreshold   uint64
	AmountSpecifiedIsInput bool
	AToBOne                bool
	AToBTwo                bool
	SqrtPriceLimitOne      binary.Uint128
	SqrtPriceLimitTwo      binary.Uint128
	// Accounts:
	// [0] = [] token_program
	TokenProgram solanago.PublicKey `bin:"-"`
	// [1] = [,signer] token_authority
	TokenAuthority solanago.PublicKey `bin:"-"`
	// [2] = [writable] whirlpool_one
	WhirlpoolOne solanago.PublicKey `bin:"-"`
	// [3] = [writable] whirlpool_two
	WhirlpoolTwo solanago.PublicKey `bin:"-"`
	// [4] = [writable] token_owner_account_one_a
	TokenOwnerAccountOneA solanago.PublicKey `bin:"-"`
	// [5] = [writable] token_vault_one_a
	TokenVaultOneA solanago.PublicKey `bin:"-"`
	// [6] = [writable] token_owner_account_one_b
	TokenOwnerAccountOneB solanago.PublicKey `bin:"-"`
	// [7] = [writable] token_vault_one_b
	TokenVaultOneB solanago.PublicKey `bin:"-"`
	// [8] = [writable] token_owner_account_two_a
	TokenOwnerAccountTwoA solanago.PublicKey `bin:"-"`
	// [9] = [writable] token_vault_two_a
	TokenVaultTwoA solanago.PublicKey `bin:"-"`
	// [10] = [writable] token_owner_account_two_b
	TokenOwnerAccountTwoB solanago.PublicKey `bin:"-"`
	// [11] = [writable] token_vault_two_b
	TokenVaultTwoB solanago.PublicKey `bin:"-"`
	// [12] = [writable] tick_array_one0
	TickArrayOne0 solanago.PublicKey `bin:"-"`
	// [13] = [writable] tick_array_one1
	TickArrayOne1 solanago.PublicKey `bin:"-"`
	// [14] = [writable] tick_array_one2
	TickArrayOne2 solanago.PublicKey `bin:"-"`
	// [15] = [writable] tick_array_two0
	TickArrayTwo0 solanago.PublicKey `bin:"-"`
	// [16] = [writable] tick_array_two1
	TickArrayTwo1 solanago.PublicKey `bin:"-"`
	// [17] = [writable] tick_array_two2
	TickArrayTwo2 solanago.PublicKey `bin:"-"`
	// [18] = [] oracle_one
	OracleOne solanago.PublicKey `bin:"-"`
	// [19] = [] oracle_two
	OracleTwo solanago.PublicKey `bin:"-"`
	// PublicKeySlice
	solanago.PublicKeySlice `bin:"-"`
}

func (obj TwoHopSwap) MarshalWithEncoder(encoder *binary.Encoder) (err error) {
	// Serialize `amountParam`:
	if err = encoder.Encode(obj.Amount); err != nil {
		return fmt.Errorf("error while marshaling amountParam:%w", err)
	}
	// Serialize `otherAmountThresholdParam`:
	if err = encoder.Encode(obj.OtherAmountThreshold); err != nil {
		return fmt.Errorf("error while marshaling otherAmountThresholdParam:%w", err)
	}
	// Serialize `amountSpecifiedIsInputParam`:
	if err = encoder.Encode(obj.AmountSpecifiedIsInput); err != nil {
		return fmt.Errorf("error while marshaling amountSpecifiedIsInputParam:%w", err)
	}
	// Serialize `aToBOneParam`:
	if err = encoder.Encode(obj.AToBOne); err != nil {
		return fmt.Errorf("error while marshaling aToBOneParam:%w", err)
	}
	// Serialize `aToBTwoParam`:
	if err = encoder.Encode(obj.AToBTwo); err != nil {
		return fmt.Errorf("error while marshaling aToBTwoParam:%w", err)
	}
	// Serialize `sqrtPriceLimitOneParam`:
	if err = encoder.Encode(obj.SqrtPriceLimitOne); err != nil {
		return fmt.Errorf("error while marshaling sqrtPriceLimitOneParam:%w", err)
	}
	// Serialize `sqrtPriceLimitTwoParam`:
	if err = encoder.Encode(obj.SqrtPriceLimitTwo); err != nil {
		return fmt.Errorf("error while marshaling sqrtPriceLimitTwoParam:%w", err)
	}
	return nil
}

func (obj *TwoHopSwap) UnmarshalWithDecoder(decoder *binary.Decoder) (err error) {
	// Deserialize `Amount`:
	if err = decoder.Decode(&obj.Amount); err != nil {
		return fmt.Errorf("error while unmarshaling Amount:%w", err)
	}
	// Deserialize `OtherAmountThreshold`:
	if err = decoder.Decode(&obj.OtherAmountThreshold); err != nil {
		return fmt.Errorf("error while unmarshaling OtherAmountThreshold:%w", err)
	}
	// Deserialize `AmountSpecifiedIsInput`:
	if err = decoder.Decode(&obj.AmountSpecifiedIsInput); err != nil {
		return fmt.Errorf("error while unmarshaling AmountSpecifiedIsInput:%w", err)
	}
	// Deserialize `AToBOne`:
	if err = decoder.Decode(&obj.AToBOne); err != nil {
		return fmt.Errorf("error while unmarshaling AToBOne:%w", err)
	}
	// Deserialize `AToBTwo`:
	if err = decoder.Decode(&obj.AToBTwo); err != nil {
		return fmt.Errorf("error while unmarshaling AToBTwo:%w", err)
	}
	// Deserialize `SqrtPriceLimitOne`:
	if err = decoder.Decode(&obj.SqrtPriceLimitOne); err != nil {
		return fmt.Errorf("error while unmarshaling SqrtPriceLimitOne:%w", err)
	}
	// Deserialize `SqrtPriceLimitTwo`:
	if err = decoder.Decode(&obj.SqrtPriceLimitTwo); err != nil {
		return fmt.Errorf("error while unmarshaling SqrtPriceLimitTwo:%w", err)
	}
	return nil
}

func (obj *TwoHopSwap) SetAccounts(accounts solanago.PublicKeySlice) (err error) {
	if len(accounts) < 20 {
		return fmt.Errorf("too few accounts, expect %d actual %d", 20, len(accounts))
	}
	obj.TokenProgram = accounts[0]
	obj.TokenAuthority = accounts[1]
	obj.WhirlpoolOne = accounts[2]
	obj.WhirlpoolTwo = accounts[3]
	obj.TokenOwnerAccountOneA = accounts[4]
	obj.TokenVaultOneA = accounts[5]
	obj.TokenOwnerAccountOneB = accounts[6]
	obj.TokenVaultOneB = accounts[7]
	obj.TokenOwnerAccountTwoA = accounts[8]
	obj.TokenVaultTwoA = accounts[9]
	obj.TokenOwnerAccountTwoB = accounts[10]
	obj.TokenVaultTwoB = accounts[11]
	obj.TickArrayOne0 = accounts[12]
	obj.TickArrayOne1 = accounts[13]
	obj.TickArrayOne2 = accounts[14]
	obj.TickArrayTwo0 = accounts[15]
	obj.TickArrayTwo1 = accounts[16]
	obj.TickArrayTwo2 = accounts[17]
	obj.OracleOne = accounts[18]
	obj.OracleTwo = accounts[19]
	obj.PublicKeySlice = accounts
	return nil
}
func (obj *TwoHopSwap) PublicKeys() solanago.PublicKeySlice {
	return obj.PublicKeySlice
}

func (*TwoHopSwap) TypeID() binary.TypeID {
	return binary.TypeIDFromBytes(Instruction_TwoHopSwap)
}

func (*TwoHopSwap) NewInstance() programparser.Instruction {
	return new(TwoHopSwap)
}

func (obj *TwoHopSwap) GetRemainingAccounts() solanago.PublicKeySlice {
	return obj.PublicKeySlice[20:]
}

// Builds a "two_hop_swap" instruction.
// Perform a two-hop swap in this Whirlpool //  // ### Authority // - "token_authority" - The authority to withdraw tokens from the input token account. //  // ### Parameters // - `amount` - The amount of input or output token to swap from (depending on amount_specified_is_input). // - `other_amount_threshold` - The maximum/minimum of input/output token to swap into (depending on amount_specified_is_input). // - `amount_specified_is_input` - Specifies the token the parameter `amount`represents. If true, the amount represents the input token of the swap. // - `a_to_b_one` - The direction of the swap of hop one. True if swapping from A to B. False if swapping from B to A. // - `a_to_b_two` - The direction of the swap of hop two. True if swapping from A to B. False if swapping from B to A. // - `sqrt_price_limit_one` - The maximum/minimum price the swap will swap to in the first hop. // - `sqrt_price_limit_two` - The maximum/minimum price the swap will swap to in the second hop. //  // #### Special Errors // - `ZeroTradableAmount` - User provided parameter `amount` is 0. // - `InvalidSqrtPriceLimitDirection` - User provided parameter `sqrt_price_limit` does not match the direction of the trade. // - `SqrtPriceOutOfBounds` - User provided parameter `sqrt_price_limit` is over Whirlppool's max/min bounds for sqrt-price. // - `InvalidTickArraySequence` - User provided tick-arrays are not in sequential order required to proceed in this trade direction. // - `TickArraySequenceInvalidIndex` - The swap loop attempted to access an invalid array index during the query of the next initialized tick. // - `TickArrayIndexOutofBounds` - The swap loop attempted to access an invalid array index during tick crossing. // - `LiquidityOverflow` - Liquidity value overflowed 128bits during tick crossing. // - `InvalidTickSpacing` - The swap pool was initialized with tick-spacing of 0. // - `InvalidIntermediaryMint` - Error if the intermediary mint between hop one and two do not equal. // - `DuplicateTwoHopPool` - Error if whirlpool one & two are the same pool.
func NewTwoHopSwapInstruction(
	// Params:
	amountParam uint64,
	otherAmountThresholdParam uint64,
	amountSpecifiedIsInputParam bool,
	aToBOneParam bool,
	aToBTwoParam bool,
	sqrtPriceLimitOneParam binary.Uint128,
	sqrtPriceLimitTwoParam binary.Uint128,

	// Accounts:
	tokenProgram solanago.PublicKey,
	tokenAuthority solanago.PublicKey,
	whirlpoolOne solanago.PublicKey,
	whirlpoolTwo solanago.PublicKey,
	tokenOwnerAccountOneA solanago.PublicKey,
	tokenVaultOneA solanago.PublicKey,
	tokenOwnerAccountOneB solanago.PublicKey,
	tokenVaultOneB solanago.PublicKey,
	tokenOwnerAccountTwoA solanago.PublicKey,
	tokenVaultTwoA solanago.PublicKey,
	tokenOwnerAccountTwoB solanago.PublicKey,
	tokenVaultTwoB solanago.PublicKey,
	tickArrayOne0 solanago.PublicKey,
	tickArrayOne1 solanago.PublicKey,
	tickArrayOne2 solanago.PublicKey,
	tickArrayTwo0 solanago.PublicKey,
	tickArrayTwo1 solanago.PublicKey,
	tickArrayTwo2 solanago.PublicKey,
	oracleOne solanago.PublicKey,
	oracleTwo solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) (*solanago.GenericInstruction, error) {
	var (
		err    error
		buf__  = new(bytes.Buffer)
		enc__  = binary.NewBorshEncoder(buf__)
		metas_ = make(solanago.AccountMetaSlice, 20, 20+len(remaining__))
	)

	// Encode the instruction discriminator.
	if err = enc__.WriteBytes(Instruction_TwoHopSwap[:], false); err != nil {
		return nil, fmt.Errorf("failed to write instruction discriminator: %w", err)
	}

	{
		// Serialize `amountParam`:
		if err = enc__.Encode(amountParam); err != nil {
			return nil, fmt.Errorf("error while marshaling amountParam:%w", err)
		}
		// Serialize `otherAmountThresholdParam`:
		if err = enc__.Encode(otherAmountThresholdParam); err != nil {
			return nil, fmt.Errorf("error while marshaling otherAmountThresholdParam:%w", err)
		}
		// Serialize `amountSpecifiedIsInputParam`:
		if err = enc__.Encode(amountSpecifiedIsInputParam); err != nil {
			return nil, fmt.Errorf("error while marshaling amountSpecifiedIsInputParam:%w", err)
		}
		// Serialize `aToBOneParam`:
		if err = enc__.Encode(aToBOneParam); err != nil {
			return nil, fmt.Errorf("error while marshaling aToBOneParam:%w", err)
		}
		// Serialize `aToBTwoParam`:
		if err = enc__.Encode(aToBTwoParam); err != nil {
			return nil, fmt.Errorf("error while marshaling aToBTwoParam:%w", err)
		}
		// Serialize `sqrtPriceLimitOneParam`:
		if err = enc__.Encode(sqrtPriceLimitOneParam); err != nil {
			return nil, fmt.Errorf("error while marshaling sqrtPriceLimitOneParam:%w", err)
		}
		// Serialize `sqrtPriceLimitTwoParam`:
		if err = enc__.Encode(sqrtPriceLimitTwoParam); err != nil {
			return nil, fmt.Errorf("error while marshaling sqrtPriceLimitTwoParam:%w", err)
		}
	}

	// Add the accounts to the instruction.
	{
		// [0] = [] token_program
		metas_[0] = solanago.NewAccountMeta(tokenProgram, false, false)
		// [1] = [,signer] token_authority
		metas_[1] = solanago.NewAccountMeta(tokenAuthority, false, true)
		// [2] = [writable] whirlpool_one
		metas_[2] = solanago.NewAccountMeta(whirlpoolOne, true, false)
		// [3] = [writable] whirlpool_two
		metas_[3] = solanago.NewAccountMeta(whirlpoolTwo, true, false)
		// [4] = [writable] token_owner_account_one_a
		metas_[4] = solanago.NewAccountMeta(tokenOwnerAccountOneA, true, false)
		// [5] = [writable] token_vault_one_a
		metas_[5] = solanago.NewAccountMeta(tokenVaultOneA, true, false)
		// [6] = [writable] token_owner_account_one_b
		metas_[6] = solanago.NewAccountMeta(tokenOwnerAccountOneB, true, false)
		// [7] = [writable] token_vault_one_b
		metas_[7] = solanago.NewAccountMeta(tokenVaultOneB, true, false)
		// [8] = [writable] token_owner_account_two_a
		metas_[8] = solanago.NewAccountMeta(tokenOwnerAccountTwoA, true, false)
		// [9] = [writable] token_vault_two_a
		metas_[9] = solanago.NewAccountMeta(tokenVaultTwoA, true, false)
		// [10] = [writable] token_owner_account_two_b
		metas_[10] = solanago.NewAccountMeta(tokenOwnerAccountTwoB, true, false)
		// [11] = [writable] token_vault_two_b
		metas_[11] = solanago.NewAccountMeta(tokenVaultTwoB, true, false)
		// [12] = [writable] tick_array_one0
		metas_[12] = solanago.NewAccountMeta(tickArrayOne0, true, false)
		// [13] = [writable] tick_array_one1
		metas_[13] = solanago.NewAccountMeta(tickArrayOne1, true, false)
		// [14] = [writable] tick_array_one2
		metas_[14] = solanago.NewAccountMeta(tickArrayOne2, true, false)
		// [15] = [writable] tick_array_two0
		metas_[15] = solanago.NewAccountMeta(tickArrayTwo0, true, false)
		// [16] = [writable] tick_array_two1
		metas_[16] = solanago.NewAccountMeta(tickArrayTwo1, true, false)
		// [17] = [writable] tick_array_two2
		metas_[17] = solanago.NewAccountMeta(tickArrayTwo2, true, false)
		// [18] = [] oracle_one
		metas_[18] = solanago.NewAccountMeta(oracleOne, false, false)
		// [19] = [] oracle_two
		metas_[19] = solanago.NewAccountMeta(oracleTwo, false, false)
		// append remaining metas
		metas_ = append(metas_, remaining__...)
	}

	// Create the instruction.
	return solanago.NewInstruction(
		ProgramID,
		metas_,
		buf__.Bytes(),
	), nil
}

// Builds a "BuildTwoHopSwap" instruction.
// Perform a two-hop swap in this Whirlpool //  // ### Authority // - "token_authority" - The authority to withdraw tokens from the input token account. //  // ### Parameters // - `amount` - The amount of input or output token to swap from (depending on amount_specified_is_input). // - `other_amount_threshold` - The maximum/minimum of input/output token to swap into (depending on amount_specified_is_input). // - `amount_specified_is_input` - Specifies the token the parameter `amount`represents. If true, the amount represents the input token of the swap. // - `a_to_b_one` - The direction of the swap of hop one. True if swapping from A to B. False if swapping from B to A. // - `a_to_b_two` - The direction of the swap of hop two. True if swapping from A to B. False if swapping from B to A. // - `sqrt_price_limit_one` - The maximum/minimum price the swap will swap to in the first hop. // - `sqrt_price_limit_two` - The maximum/minimum price the swap will swap to in the second hop. //  // #### Special Errors // - `ZeroTradableAmount` - User provided parameter `amount` is 0. // - `InvalidSqrtPriceLimitDirection` - User provided parameter `sqrt_price_limit` does not match the direction of the trade. // - `SqrtPriceOutOfBounds` - User provided parameter `sqrt_price_limit` is over Whirlppool's max/min bounds for sqrt-price. // - `InvalidTickArraySequence` - User provided tick-arrays are not in sequential order required to proceed in this trade direction. // - `TickArraySequenceInvalidIndex` - The swap loop attempted to access an invalid array index during the query of the next initialized tick. // - `TickArrayIndexOutofBounds` - The swap loop attempted to access an invalid array index during tick crossing. // - `LiquidityOverflow` - Liquidity value overflowed 128bits during tick crossing. // - `InvalidTickSpacing` - The swap pool was initialized with tick-spacing of 0. // - `InvalidIntermediaryMint` - Error if the intermediary mint between hop one and two do not equal. // - `DuplicateTwoHopPool` - Error if whirlpool one & two are the same pool.
func BuildTwoHopSwap(
	// Params:
	amountParam uint64,
	otherAmountThresholdParam uint64,
	amountSpecifiedIsInputParam bool,
	aToBOneParam bool,
	aToBTwoParam bool,
	sqrtPriceLimitOneParam binary.Uint128,
	sqrtPriceLimitTwoParam binary.Uint128,

	// Accounts:
	tokenProgram solanago.PublicKey,
	tokenAuthority solanago.PublicKey,
	whirlpoolOne solanago.PublicKey,
	whirlpoolTwo solanago.PublicKey,
	tokenOwnerAccountOneA solanago.PublicKey,
	tokenVaultOneA solanago.PublicKey,
	tokenOwnerAccountOneB solanago.PublicKey,
	tokenVaultOneB solanago.PublicKey,
	tokenOwnerAccountTwoA solanago.PublicKey,
	tokenVaultTwoA solanago.PublicKey,
	tokenOwnerAccountTwoB solanago.PublicKey,
	tokenVaultTwoB solanago.PublicKey,
	tickArrayOne0 solanago.PublicKey,
	tickArrayOne1 solanago.PublicKey,
	tickArrayOne2 solanago.PublicKey,
	tickArrayTwo0 solanago.PublicKey,
	tickArrayTwo1 solanago.PublicKey,
	tickArrayTwo2 solanago.PublicKey,
	oracleOne solanago.PublicKey,
	oracleTwo solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) *solanago.GenericInstruction {
	instruction_, _ := NewTwoHopSwapInstruction(
		amountParam,
		otherAmountThresholdParam,
		amountSpecifiedIsInputParam,
		aToBOneParam,
		aToBTwoParam,
		sqrtPriceLimitOneParam,
		sqrtPriceLimitTwoParam,
		tokenProgram,
		tokenAuthority,
		whirlpoolOne,
		whirlpoolTwo,
		tokenOwnerAccountOneA,
		tokenVaultOneA,
		tokenOwnerAccountOneB,
		tokenVaultOneB,
		tokenOwnerAccountTwoA,
		tokenVaultTwoA,
		tokenOwnerAccountTwoB,
		tokenVaultTwoB,
		tickArrayOne0,
		tickArrayOne1,
		tickArrayOne2,
		tickArrayTwo0,
		tickArrayTwo1,
		tickArrayTwo2,
		oracleOne,
		oracleTwo,
		remaining__...,
	)
	return instruction_
}
