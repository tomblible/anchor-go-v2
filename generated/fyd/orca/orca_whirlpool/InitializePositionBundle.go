// Code generated by https://github.com/gagliardetto/anchor-go. DO NOT EDIT.

package orca_whirlpool

import (
	"bytes"
	"fmt"
	binary "github.com/gagliardetto/binary"
	solanago "github.com/gagliardetto/solana-go"
	programparser "github.com/yydsqu/solana-sdk/program_parser"
)

// Builds a "initialize_position_bundle" instruction.

// Initializes a PositionBundle account that bundles several positions.
// A unique token will be minted to represent the position bundle in the users wallet.
type InitializePositionBundle struct {
	// Params:
	// Accounts:
	// [0] = [writable] position_bundle
	PositionBundle solanago.PublicKey `bin:"-"`
	// [1] = [writable,signer] position_bundle_mint
	PositionBundleMint solanago.PublicKey `bin:"-"`
	// [2] = [writable] position_bundle_token_account
	PositionBundleTokenAccount solanago.PublicKey `bin:"-"`
	// [3] = [] position_bundle_owner
	PositionBundleOwner solanago.PublicKey `bin:"-"`
	// [4] = [writable,signer] funder
	Funder solanago.PublicKey `bin:"-"`
	// [5] = [] token_program
	TokenProgram solanago.PublicKey `bin:"-"`
	// [6] = [] system_program
	SystemProgram solanago.PublicKey `bin:"-"`
	// [7] = [] rent
	Rent solanago.PublicKey `bin:"-"`
	// [8] = [] associated_token_program
	AssociatedTokenProgram solanago.PublicKey `bin:"-"`
	// PublicKeySlice
	solanago.PublicKeySlice `bin:"-"`
}

func (obj InitializePositionBundle) MarshalWithEncoder(encoder *binary.Encoder) (err error) {
	return nil
}

func (obj *InitializePositionBundle) UnmarshalWithDecoder(decoder *binary.Decoder) (err error) {
	return nil
}

func (obj *InitializePositionBundle) SetAccounts(accounts solanago.PublicKeySlice) (err error) {
	if len(accounts) < 9 {
		return fmt.Errorf("too few accounts, expect %d actual %d", 9, len(accounts))
	}
	obj.PositionBundle = accounts[0]
	obj.PositionBundleMint = accounts[1]
	obj.PositionBundleTokenAccount = accounts[2]
	obj.PositionBundleOwner = accounts[3]
	obj.Funder = accounts[4]
	obj.TokenProgram = accounts[5]
	obj.SystemProgram = accounts[6]
	obj.Rent = accounts[7]
	obj.AssociatedTokenProgram = accounts[8]
	obj.PublicKeySlice = accounts
	return nil
}
func (obj *InitializePositionBundle) PublicKeys() solanago.PublicKeySlice {
	return obj.PublicKeySlice
}

func (*InitializePositionBundle) TypeID() binary.TypeID {
	return binary.TypeIDFromBytes(Instruction_InitializePositionBundle)
}

func (*InitializePositionBundle) NewInstance() programparser.Instruction {
	return new(InitializePositionBundle)
}

// Builds a "initialize_position_bundle" instruction.
// Initializes a PositionBundle account that bundles several positions. // A unique token will be minted to represent the position bundle in the users wallet.
func NewInitializePositionBundleInstruction(
	positionBundle solanago.PublicKey,
	positionBundleMint solanago.PublicKey,
	positionBundleTokenAccount solanago.PublicKey,
	positionBundleOwner solanago.PublicKey,
	funder solanago.PublicKey,
	tokenProgram solanago.PublicKey,
	systemProgram solanago.PublicKey,
	rent solanago.PublicKey,
	associatedTokenProgram solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) (*solanago.GenericInstruction, error) {
	var (
		err    error
		buf__  = new(bytes.Buffer)
		enc__  = binary.NewBorshEncoder(buf__)
		metas_ = make(solanago.AccountMetaSlice, 9, 9+len(remaining__))
	)

	// Encode the instruction discriminator.
	if err = enc__.WriteBytes(Instruction_InitializePositionBundle[:], false); err != nil {
		return nil, fmt.Errorf("failed to write instruction discriminator: %w", err)
	}

	// Add the accounts to the instruction.
	{
		// [0] = [writable] position_bundle
		metas_[0] = solanago.NewAccountMeta(positionBundle, true, false)
		// [1] = [writable,signer] position_bundle_mint
		metas_[1] = solanago.NewAccountMeta(positionBundleMint, true, true)
		// [2] = [writable] position_bundle_token_account
		metas_[2] = solanago.NewAccountMeta(positionBundleTokenAccount, true, false)
		// [3] = [] position_bundle_owner
		metas_[3] = solanago.NewAccountMeta(positionBundleOwner, false, false)
		// [4] = [writable,signer] funder
		metas_[4] = solanago.NewAccountMeta(funder, true, true)
		// [5] = [] token_program
		metas_[5] = solanago.NewAccountMeta(tokenProgram, false, false)
		// [6] = [] system_program
		metas_[6] = solanago.NewAccountMeta(systemProgram, false, false)
		// [7] = [] rent
		metas_[7] = solanago.NewAccountMeta(rent, false, false)
		// [8] = [] associated_token_program
		metas_[8] = solanago.NewAccountMeta(associatedTokenProgram, false, false)
		// append remaining metas
		metas_ = append(metas_, remaining__...)
	}

	// Create the instruction.
	return solanago.NewInstruction(
		ProgramID,
		metas_,
		buf__.Bytes(),
	), nil
}

// Builds a "BuildInitializePositionBundle" instruction.
// Initializes a PositionBundle account that bundles several positions. // A unique token will be minted to represent the position bundle in the users wallet.
func BuildInitializePositionBundle(
	positionBundle solanago.PublicKey,
	positionBundleMint solanago.PublicKey,
	positionBundleTokenAccount solanago.PublicKey,
	positionBundleOwner solanago.PublicKey,
	funder solanago.PublicKey,
	tokenProgram solanago.PublicKey,
	systemProgram solanago.PublicKey,
	rent solanago.PublicKey,
	associatedTokenProgram solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) *solanago.GenericInstruction {
	instruction_, _ := NewInitializePositionBundleInstruction(
		positionBundle,
		positionBundleMint,
		positionBundleTokenAccount,
		positionBundleOwner,
		funder,
		tokenProgram,
		systemProgram,
		rent,
		associatedTokenProgram,
		remaining__...,
	)
	return instruction_
}
