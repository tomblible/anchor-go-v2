// Code generated by https://github.com/gagliardetto/anchor-go. DO NOT EDIT.

package meteora_dlmm

import (
	"bytes"
	"fmt"
	binary "github.com/gagliardetto/binary"
	solanago "github.com/gagliardetto/solana-go"
	programparser "github.com/yydsqu/solana-sdk/program_parser"
)

// Builds a "initialize_permission_lb_pair" instruction.
type InitializePermissionLbPair struct {
	// Params:
	IxData InitPermissionPairIx
	// Accounts:
	// [0] = [,signer] base
	Base solanago.PublicKey `bin:"-"`
	// [1] = [writable] lb_pair
	LbPair solanago.PublicKey `bin:"-"`
	// [2] = [writable,optional] bin_array_bitmap_extension
	BinArrayBitmapExtension solanago.PublicKey `bin:"-"`
	// [3] = [] token_mint_x
	TokenMintX solanago.PublicKey `bin:"-"`
	// [4] = [] token_mint_y
	TokenMintY solanago.PublicKey `bin:"-"`
	// [5] = [writable] reserve_x
	ReserveX solanago.PublicKey `bin:"-"`
	// [6] = [writable] reserve_y
	ReserveY solanago.PublicKey `bin:"-"`
	// [7] = [writable] oracle
	Oracle solanago.PublicKey `bin:"-"`
	// [8] = [writable,signer] admin
	Admin solanago.PublicKey `bin:"-"`
	// [9] = [,optional] token_badge_x
	TokenBadgeX solanago.PublicKey `bin:"-"`
	// [10] = [,optional] token_badge_y
	TokenBadgeY solanago.PublicKey `bin:"-"`
	// [11] = [] token_program_x
	TokenProgramX solanago.PublicKey `bin:"-"`
	// [12] = [] token_program_y
	TokenProgramY solanago.PublicKey `bin:"-"`
	// [13] = [] system_program
	SystemProgram solanago.PublicKey `bin:"-"`
	// [14] = [] rent[SysvarRent111111111111111111111111111111111]
	Rent solanago.PublicKey `bin:"-"`
	// [15] = [] event_authority
	EventAuthority solanago.PublicKey `bin:"-"`
	// [16] = [] program
	Program solanago.PublicKey `bin:"-"`
	// PublicKeySlice
	solanago.PublicKeySlice `bin:"-"`
}

func (obj InitializePermissionLbPair) MarshalWithEncoder(encoder *binary.Encoder) (err error) {
	// Serialize `ixDataParam`:
	if err = encoder.Encode(obj.IxData); err != nil {
		return fmt.Errorf("error while marshaling ixDataParam:%w", err)
	}
	return nil
}

func (obj *InitializePermissionLbPair) UnmarshalWithDecoder(decoder *binary.Decoder) (err error) {
	// Deserialize `IxData`:
	if err = decoder.Decode(&obj.IxData); err != nil {
		return fmt.Errorf("error while unmarshaling IxData:%w", err)
	}
	return nil
}

func (obj *InitializePermissionLbPair) SetAccounts(accounts solanago.PublicKeySlice) (err error) {
	if len(accounts) < 17 {
		return fmt.Errorf("too few accounts, expect %d actual %d", 17, len(accounts))
	}
	obj.Base = accounts[0]
	obj.LbPair = accounts[1]
	obj.BinArrayBitmapExtension = accounts[2]
	obj.TokenMintX = accounts[3]
	obj.TokenMintY = accounts[4]
	obj.ReserveX = accounts[5]
	obj.ReserveY = accounts[6]
	obj.Oracle = accounts[7]
	obj.Admin = accounts[8]
	obj.TokenBadgeX = accounts[9]
	obj.TokenBadgeY = accounts[10]
	obj.TokenProgramX = accounts[11]
	obj.TokenProgramY = accounts[12]
	obj.SystemProgram = accounts[13]
	obj.Rent = accounts[14]
	obj.EventAuthority = accounts[15]
	obj.Program = accounts[16]
	obj.PublicKeySlice = accounts
	return nil
}
func (obj *InitializePermissionLbPair) PublicKeys() solanago.PublicKeySlice {
	return obj.PublicKeySlice
}

func (*InitializePermissionLbPair) TypeID() binary.TypeID {
	return binary.TypeIDFromBytes(Instruction_InitializePermissionLbPair)
}

func (*InitializePermissionLbPair) NewInstance() programparser.Instruction {
	return new(InitializePermissionLbPair)
}

func (obj *InitializePermissionLbPair) GetRemainingAccounts() solanago.PublicKeySlice {
	return obj.PublicKeySlice[17:]
}

// Builds a "initialize_permission_lb_pair" instruction.
func NewInitializePermissionLbPairInstruction(
	// Params:
	ixDataParam InitPermissionPairIx,

	// Accounts:
	base solanago.PublicKey,
	lbPair solanago.PublicKey,
	binArrayBitmapExtension solanago.PublicKey,
	tokenMintX solanago.PublicKey,
	tokenMintY solanago.PublicKey,
	reserveX solanago.PublicKey,
	reserveY solanago.PublicKey,
	oracle solanago.PublicKey,
	admin solanago.PublicKey,
	tokenBadgeX solanago.PublicKey,
	tokenBadgeY solanago.PublicKey,
	tokenProgramX solanago.PublicKey,
	tokenProgramY solanago.PublicKey,
	eventAuthority solanago.PublicKey,
	program solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) (*solanago.GenericInstruction, error) {
	var (
		err    error
		buf__  = new(bytes.Buffer)
		enc__  = binary.NewBorshEncoder(buf__)
		metas_ = make(solanago.AccountMetaSlice, 17, 17+len(remaining__))
	)

	// Encode the instruction discriminator.
	if err = enc__.WriteBytes(Instruction_InitializePermissionLbPair[:], false); err != nil {
		return nil, fmt.Errorf("failed to write instruction discriminator: %w", err)
	}

	{
		// Serialize `ixDataParam`:
		if err = enc__.Encode(ixDataParam); err != nil {
			return nil, fmt.Errorf("error while marshaling ixDataParam:%w", err)
		}
	}

	// Add the accounts to the instruction.
	{
		// [0] = [,signer] base
		metas_[0] = solanago.NewAccountMeta(base, false, true)
		// [1] = [writable] lb_pair
		metas_[1] = solanago.NewAccountMeta(lbPair, true, false)
		// [2] = [writable,optional] bin_array_bitmap_extension
		metas_[2] = solanago.NewAccountMeta(binArrayBitmapExtension, true, false)
		// [3] = [] token_mint_x
		metas_[3] = solanago.NewAccountMeta(tokenMintX, false, false)
		// [4] = [] token_mint_y
		metas_[4] = solanago.NewAccountMeta(tokenMintY, false, false)
		// [5] = [writable] reserve_x
		metas_[5] = solanago.NewAccountMeta(reserveX, true, false)
		// [6] = [writable] reserve_y
		metas_[6] = solanago.NewAccountMeta(reserveY, true, false)
		// [7] = [writable] oracle
		metas_[7] = solanago.NewAccountMeta(oracle, true, false)
		// [8] = [writable,signer] admin
		metas_[8] = solanago.NewAccountMeta(admin, true, true)
		// [9] = [,optional] token_badge_x
		metas_[9] = solanago.NewAccountMeta(tokenBadgeX, false, false)
		// [10] = [,optional] token_badge_y
		metas_[10] = solanago.NewAccountMeta(tokenBadgeY, false, false)
		// [11] = [] token_program_x
		metas_[11] = solanago.NewAccountMeta(tokenProgramX, false, false)
		// [12] = [] token_program_y
		metas_[12] = solanago.NewAccountMeta(tokenProgramY, false, false)
		// [13] = [] system_program
		metas_[13] = solanago.NewAccountMeta(SystemProgram, false, false)
		// [14] = [] rent[SysvarRent111111111111111111111111111111111]
		metas_[14] = solanago.NewAccountMeta(Rent, false, false)
		// [15] = [] event_authority
		metas_[15] = solanago.NewAccountMeta(eventAuthority, false, false)
		// [16] = [] program
		metas_[16] = solanago.NewAccountMeta(program, false, false)
		// append remaining metas
		metas_ = append(metas_, remaining__...)
	}

	// Create the instruction.
	return solanago.NewInstruction(
		ProgramID,
		metas_,
		buf__.Bytes(),
	), nil
}

// Builds a "BuildInitializePermissionLbPair" instruction.
func BuildInitializePermissionLbPair(
	// Params:
	ixDataParam InitPermissionPairIx,

	// Accounts:
	base solanago.PublicKey,
	lbPair solanago.PublicKey,
	binArrayBitmapExtension solanago.PublicKey,
	tokenMintX solanago.PublicKey,
	tokenMintY solanago.PublicKey,
	reserveX solanago.PublicKey,
	reserveY solanago.PublicKey,
	oracle solanago.PublicKey,
	admin solanago.PublicKey,
	tokenBadgeX solanago.PublicKey,
	tokenBadgeY solanago.PublicKey,
	tokenProgramX solanago.PublicKey,
	tokenProgramY solanago.PublicKey,
	eventAuthority solanago.PublicKey,
	program solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) *solanago.GenericInstruction {
	instruction_, _ := NewInitializePermissionLbPairInstruction(
		ixDataParam,
		base,
		lbPair,
		binArrayBitmapExtension,
		tokenMintX,
		tokenMintY,
		reserveX,
		reserveY,
		oracle,
		admin,
		tokenBadgeX,
		tokenBadgeY,
		tokenProgramX,
		tokenProgramY,
		eventAuthority,
		program,
		remaining__...,
	)
	return instruction_
}
