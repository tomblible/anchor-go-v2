// Code generated by https://github.com/gagliardetto/anchor-go. DO NOT EDIT.

package meteora_damm

import (
	"bytes"
	"fmt"

	binary "github.com/gagliardetto/binary"
	solanago "github.com/gagliardetto/solana-go"
	programparser "github.com/yydsqu/solana-sdk/program_parser"
)

// Builds a "initialize_customizable_pool" instruction.
type InitializeCustomizablePool struct {
	// Params:
	Params InitializeCustomizablePoolParameters
	// Accounts:
	// [0] = [] creator
	Creator solanago.PublicKey `bin:"-"`
	// [1] = [writable,signer] position_nft_mint
	PositionNftMint solanago.PublicKey `bin:"-"`
	// [2] = [writable] position_nft_account
	PositionNftAccount solanago.PublicKey `bin:"-"`
	// [3] = [writable,signer] payer
	Payer solanago.PublicKey `bin:"-"`
	// [4] = [] pool_authority[HLnpSz9h2S4hiLQ43rnSD9XkcUThA7B8hQMKmDaiTLcC]
	PoolAuthority solanago.PublicKey `bin:"-"`
	// [5] = [writable] pool
	Pool solanago.PublicKey `bin:"-"`
	// [6] = [writable] position
	Position solanago.PublicKey `bin:"-"`
	// [7] = [] token_a_mint
	TokenAMint solanago.PublicKey `bin:"-"`
	// [8] = [] token_b_mint
	TokenBMint solanago.PublicKey `bin:"-"`
	// [9] = [writable] token_a_vault
	TokenAVault solanago.PublicKey `bin:"-"`
	// [10] = [writable] token_b_vault
	TokenBVault solanago.PublicKey `bin:"-"`
	// [11] = [writable] payer_token_a
	PayerTokenA solanago.PublicKey `bin:"-"`
	// [12] = [writable] payer_token_b
	PayerTokenB solanago.PublicKey `bin:"-"`
	// [13] = [] token_a_program
	TokenAProgram solanago.PublicKey `bin:"-"`
	// [14] = [] token_b_program
	TokenBProgram solanago.PublicKey `bin:"-"`
	// [15] = [] token_2022_program[TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb]
	Token2022Program solanago.PublicKey `bin:"-"`
	// [16] = [] system_program
	SystemProgram solanago.PublicKey `bin:"-"`
	// [17] = [] event_authority
	EventAuthority solanago.PublicKey `bin:"-"`
	// [18] = [] program
	Program solanago.PublicKey `bin:"-"`
	// PublicKeySlice
	solanago.PublicKeySlice `bin:"-"`
}

func (obj InitializeCustomizablePool) MarshalWithEncoder(encoder *binary.Encoder) (err error) {
	// Serialize `paramsParam`:
	if err = encoder.Encode(obj.Params); err != nil {
		return fmt.Errorf("error while marshaling paramsParam:%w", err)
	}
	return nil
}

func (obj *InitializeCustomizablePool) UnmarshalWithDecoder(decoder *binary.Decoder) (err error) {
	// Deserialize `Params`:
	if err = decoder.Decode(&obj.Params); err != nil {
		return fmt.Errorf("error while unmarshaling Params:%w", err)
	}
	return nil
}

func (obj *InitializeCustomizablePool) SetAccounts(accounts solanago.PublicKeySlice) (err error) {
	if len(accounts) < 19 {
		return fmt.Errorf("too few accounts, expect %d actual %d", 19, len(accounts))
	}
	obj.Creator = accounts[0]
	obj.PositionNftMint = accounts[1]
	obj.PositionNftAccount = accounts[2]
	obj.Payer = accounts[3]
	obj.PoolAuthority = accounts[4]
	obj.Pool = accounts[5]
	obj.Position = accounts[6]
	obj.TokenAMint = accounts[7]
	obj.TokenBMint = accounts[8]
	obj.TokenAVault = accounts[9]
	obj.TokenBVault = accounts[10]
	obj.PayerTokenA = accounts[11]
	obj.PayerTokenB = accounts[12]
	obj.TokenAProgram = accounts[13]
	obj.TokenBProgram = accounts[14]
	obj.Token2022Program = accounts[15]
	obj.SystemProgram = accounts[16]
	obj.EventAuthority = accounts[17]
	obj.Program = accounts[18]
	obj.PublicKeySlice = accounts
	return nil
}
func (obj *InitializeCustomizablePool) PublicKeys() solanago.PublicKeySlice {
	return obj.PublicKeySlice
}

func (*InitializeCustomizablePool) TypeID() binary.TypeID {
	return binary.TypeIDFromBytes(Instruction_InitializeCustomizablePool)
}

func (*InitializeCustomizablePool) NewInstance() programparser.Instruction {
	return new(InitializeCustomizablePool)
}

func (obj *InitializeCustomizablePool) GetRemainingAccounts() solanago.PublicKeySlice {
	if len(obj.PublicKeySlice) <= 19 {
		return nil
	}
	return obj.PublicKeySlice[19:]
}

// Builds a "initialize_customizable_pool" instruction.
func NewInitializeCustomizablePoolInstruction(
	// Params:
	paramsParam InitializeCustomizablePoolParameters,

	// Accounts:
	creator solanago.PublicKey,
	positionNftMint solanago.PublicKey,
	positionNftAccount solanago.PublicKey,
	payer solanago.PublicKey,
	pool solanago.PublicKey,
	position solanago.PublicKey,
	tokenAMint solanago.PublicKey,
	tokenBMint solanago.PublicKey,
	tokenAVault solanago.PublicKey,
	tokenBVault solanago.PublicKey,
	payerTokenA solanago.PublicKey,
	payerTokenB solanago.PublicKey,
	tokenAProgram solanago.PublicKey,
	tokenBProgram solanago.PublicKey,
	eventAuthority solanago.PublicKey,
	program solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) (*solanago.GenericInstruction, error) {
	var (
		err    error
		buf__  = new(bytes.Buffer)
		enc__  = binary.NewBorshEncoder(buf__)
		metas_ = make(solanago.AccountMetaSlice, 19, 19+len(remaining__))
	)

	// Encode the instruction discriminator.
	if err = enc__.WriteBytes(Instruction_InitializeCustomizablePool[:], false); err != nil {
		return nil, fmt.Errorf("failed to write instruction discriminator: %w", err)
	}

	{
		// Serialize `paramsParam`:
		if err = enc__.Encode(paramsParam); err != nil {
			return nil, fmt.Errorf("error while marshaling paramsParam:%w", err)
		}
	}

	// Add the accounts to the instruction.
	{
		// [0] = [] creator
		metas_[0] = solanago.NewAccountMeta(creator, false, false)
		// [1] = [writable,signer] position_nft_mint
		// position_nft_mint
		metas_[1] = solanago.NewAccountMeta(positionNftMint, true, true)
		// [2] = [writable] position_nft_account
		// position nft account
		metas_[2] = solanago.NewAccountMeta(positionNftAccount, true, false)
		// [3] = [writable,signer] payer
		// Address paying to create the pool. Can be anyone
		metas_[3] = solanago.NewAccountMeta(payer, true, true)
		// [4] = [] pool_authority[HLnpSz9h2S4hiLQ43rnSD9XkcUThA7B8hQMKmDaiTLcC]
		metas_[4] = solanago.NewAccountMeta(PoolAuthority, false, false)
		// [5] = [writable] pool
		// Initialize an account to store the pool state
		metas_[5] = solanago.NewAccountMeta(pool, true, false)
		// [6] = [writable] position
		metas_[6] = solanago.NewAccountMeta(position, true, false)
		// [7] = [] token_a_mint
		// Token a mint
		metas_[7] = solanago.NewAccountMeta(tokenAMint, false, false)
		// [8] = [] token_b_mint
		// Token b mint
		metas_[8] = solanago.NewAccountMeta(tokenBMint, false, false)
		// [9] = [writable] token_a_vault
		// Token a vault for the pool
		metas_[9] = solanago.NewAccountMeta(tokenAVault, true, false)
		// [10] = [writable] token_b_vault
		// Token b vault for the pool
		metas_[10] = solanago.NewAccountMeta(tokenBVault, true, false)
		// [11] = [writable] payer_token_a
		// payer token a account
		metas_[11] = solanago.NewAccountMeta(payerTokenA, true, false)
		// [12] = [writable] payer_token_b
		// creator token b account
		metas_[12] = solanago.NewAccountMeta(payerTokenB, true, false)
		// [13] = [] token_a_program
		// Program to create mint account and mint tokens
		metas_[13] = solanago.NewAccountMeta(tokenAProgram, false, false)
		// [14] = [] token_b_program
		// Program to create mint account and mint tokens
		metas_[14] = solanago.NewAccountMeta(tokenBProgram, false, false)
		// [15] = [] token_2022_program[TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb]
		// Program to create NFT mint/token account and transfer for token22 account
		metas_[15] = solanago.NewAccountMeta(Token2022Program, false, false)
		// [16] = [] system_program
		metas_[16] = solanago.NewAccountMeta(SystemProgram, false, false)
		// [17] = [] event_authority
		metas_[17] = solanago.NewAccountMeta(eventAuthority, false, false)
		// [18] = [] program
		metas_[18] = solanago.NewAccountMeta(program, false, false)
		// append remaining metas
		metas_ = append(metas_, remaining__...)
	}

	// Create the instruction.
	return solanago.NewInstruction(
		ProgramID,
		metas_,
		buf__.Bytes(),
	), nil
}

// Builds a "BuildInitializeCustomizablePool" instruction.
func BuildInitializeCustomizablePool(
	// Params:
	paramsParam InitializeCustomizablePoolParameters,

	// Accounts:
	creator solanago.PublicKey,
	positionNftMint solanago.PublicKey,
	positionNftAccount solanago.PublicKey,
	payer solanago.PublicKey,
	pool solanago.PublicKey,
	position solanago.PublicKey,
	tokenAMint solanago.PublicKey,
	tokenBMint solanago.PublicKey,
	tokenAVault solanago.PublicKey,
	tokenBVault solanago.PublicKey,
	payerTokenA solanago.PublicKey,
	payerTokenB solanago.PublicKey,
	tokenAProgram solanago.PublicKey,
	tokenBProgram solanago.PublicKey,
	eventAuthority solanago.PublicKey,
	program solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) *solanago.GenericInstruction {
	instruction_, _ := NewInitializeCustomizablePoolInstruction(
		paramsParam,
		creator,
		positionNftMint,
		positionNftAccount,
		payer,
		pool,
		position,
		tokenAMint,
		tokenBMint,
		tokenAVault,
		tokenBVault,
		payerTokenA,
		payerTokenB,
		tokenAProgram,
		tokenBProgram,
		eventAuthority,
		program,
		remaining__...,
	)
	return instruction_
}
