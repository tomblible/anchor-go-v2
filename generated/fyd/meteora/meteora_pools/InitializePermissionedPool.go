// Code generated by https://github.com/gagliardetto/anchor-go. DO NOT EDIT.

package meteora_pools

import (
	"bytes"
	"fmt"

	binary "github.com/gagliardetto/binary"
	solanago "github.com/gagliardetto/solana-go"
	programparser "github.com/yydsqu/solana-sdk/program_parser"
)

// Builds a "initialize_permissioned_pool" instruction.

// Initialize a new permissioned pool.
type InitializePermissionedPool struct {
	// Params:
	CurveType CurveType
	// Accounts:
	// [0] = [writable,signer] pool
	Pool solanago.PublicKey `bin:"-"`
	// [1] = [writable] lp_mint
	LpMint solanago.PublicKey `bin:"-"`
	// [2] = [] token_a_mint
	TokenAMint solanago.PublicKey `bin:"-"`
	// [3] = [] token_b_mint
	TokenBMint solanago.PublicKey `bin:"-"`
	// [4] = [writable] a_vault
	AVault solanago.PublicKey `bin:"-"`
	// [5] = [writable] b_vault
	BVault solanago.PublicKey `bin:"-"`
	// [6] = [writable] a_vault_lp_mint
	AVaultLpMint solanago.PublicKey `bin:"-"`
	// [7] = [writable] b_vault_lp_mint
	BVaultLpMint solanago.PublicKey `bin:"-"`
	// [8] = [writable] a_vault_lp
	AVaultLp solanago.PublicKey `bin:"-"`
	// [9] = [writable] b_vault_lp
	BVaultLp solanago.PublicKey `bin:"-"`
	// [10] = [writable] admin_token_a
	AdminTokenA solanago.PublicKey `bin:"-"`
	// [11] = [writable] admin_token_b
	AdminTokenB solanago.PublicKey `bin:"-"`
	// [12] = [writable] admin_pool_lp
	AdminPoolLp solanago.PublicKey `bin:"-"`
	// [13] = [writable] protocol_token_a_fee
	ProtocolTokenAFee solanago.PublicKey `bin:"-"`
	// [14] = [writable] protocol_token_b_fee
	ProtocolTokenBFee solanago.PublicKey `bin:"-"`
	// [15] = [writable,signer] admin
	Admin solanago.PublicKey `bin:"-"`
	// [16] = [] fee_owner
	FeeOwner solanago.PublicKey `bin:"-"`
	// [17] = [] rent
	Rent solanago.PublicKey `bin:"-"`
	// [18] = [writable] mint_metadata
	MintMetadata solanago.PublicKey `bin:"-"`
	// [19] = [] metadata_program
	MetadataProgram solanago.PublicKey `bin:"-"`
	// [20] = [] vault_program
	VaultProgram solanago.PublicKey `bin:"-"`
	// [21] = [] token_program
	TokenProgram solanago.PublicKey `bin:"-"`
	// [22] = [] associated_token_program
	AssociatedTokenProgram solanago.PublicKey `bin:"-"`
	// [23] = [] system_program
	SystemProgram solanago.PublicKey `bin:"-"`
	// PublicKeySlice
	solanago.PublicKeySlice `bin:"-"`
}

func (obj InitializePermissionedPool) MarshalWithEncoder(encoder *binary.Encoder) (err error) {
	// Serialize `curveTypeParam`:
	{
		if err = EncodeCurveType(encoder, obj.CurveType); err != nil {
			return fmt.Errorf("error while marshalingcurveTypeParam:%w", err)
		}
	}
	return nil
}

func (obj *InitializePermissionedPool) UnmarshalWithDecoder(decoder *binary.Decoder) (err error) {
	// Deserialize `CurveType`:
	{
		var err error
		obj.CurveType, err = DecodeCurveType(decoder)
		if err != nil {
			return err
		}
	}
	return nil
}

func (obj *InitializePermissionedPool) SetAccounts(accounts solanago.PublicKeySlice) (err error) {
	if len(accounts) < 24 {
		return fmt.Errorf("too few accounts, expect %d actual %d", 24, len(accounts))
	}
	obj.Pool = accounts[0]
	obj.LpMint = accounts[1]
	obj.TokenAMint = accounts[2]
	obj.TokenBMint = accounts[3]
	obj.AVault = accounts[4]
	obj.BVault = accounts[5]
	obj.AVaultLpMint = accounts[6]
	obj.BVaultLpMint = accounts[7]
	obj.AVaultLp = accounts[8]
	obj.BVaultLp = accounts[9]
	obj.AdminTokenA = accounts[10]
	obj.AdminTokenB = accounts[11]
	obj.AdminPoolLp = accounts[12]
	obj.ProtocolTokenAFee = accounts[13]
	obj.ProtocolTokenBFee = accounts[14]
	obj.Admin = accounts[15]
	obj.FeeOwner = accounts[16]
	obj.Rent = accounts[17]
	obj.MintMetadata = accounts[18]
	obj.MetadataProgram = accounts[19]
	obj.VaultProgram = accounts[20]
	obj.TokenProgram = accounts[21]
	obj.AssociatedTokenProgram = accounts[22]
	obj.SystemProgram = accounts[23]
	obj.PublicKeySlice = accounts
	return nil
}
func (obj *InitializePermissionedPool) PublicKeys() solanago.PublicKeySlice {
	return obj.PublicKeySlice
}

func (*InitializePermissionedPool) TypeID() binary.TypeID {
	return binary.TypeIDFromBytes(Instruction_InitializePermissionedPool)
}

func (*InitializePermissionedPool) NewInstance() programparser.Instruction {
	return new(InitializePermissionedPool)
}

func (obj *InitializePermissionedPool) GetRemainingAccounts() solanago.PublicKeySlice {
	if len(obj.PublicKeySlice) <= 24 {
		return nil
	}
	return obj.PublicKeySlice[24:]
}

// Builds a "initialize_permissioned_pool" instruction.
// Initialize a new permissioned pool.
func NewInitializePermissionedPoolInstruction(
	// Params:
	curveTypeParam CurveType,

	// Accounts:
	pool solanago.PublicKey,
	lpMint solanago.PublicKey,
	tokenAMint solanago.PublicKey,
	tokenBMint solanago.PublicKey,
	aVault solanago.PublicKey,
	bVault solanago.PublicKey,
	aVaultLpMint solanago.PublicKey,
	bVaultLpMint solanago.PublicKey,
	aVaultLp solanago.PublicKey,
	bVaultLp solanago.PublicKey,
	adminTokenA solanago.PublicKey,
	adminTokenB solanago.PublicKey,
	adminPoolLp solanago.PublicKey,
	protocolTokenAFee solanago.PublicKey,
	protocolTokenBFee solanago.PublicKey,
	admin solanago.PublicKey,
	feeOwner solanago.PublicKey,
	rent solanago.PublicKey,
	mintMetadata solanago.PublicKey,
	metadataProgram solanago.PublicKey,
	vaultProgram solanago.PublicKey,
	tokenProgram solanago.PublicKey,
	associatedTokenProgram solanago.PublicKey,
	systemProgram solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) (*solanago.GenericInstruction, error) {
	var (
		err    error
		buf__  = new(bytes.Buffer)
		enc__  = binary.NewBorshEncoder(buf__)
		metas_ = make(solanago.AccountMetaSlice, 24, 24+len(remaining__))
	)

	// Encode the instruction discriminator.
	if err = enc__.WriteBytes(Instruction_InitializePermissionedPool[:], false); err != nil {
		return nil, fmt.Errorf("failed to write instruction discriminator: %w", err)
	}

	{
		// Serialize `curveTypeParam`:
		{
			if err = EncodeCurveType(enc__, curveTypeParam); err != nil {
				return nil, fmt.Errorf("error while marshalingcurveTypeParam:%w", err)
			}
		}
	}

	// Add the accounts to the instruction.
	{
		// [0] = [writable,signer] pool
		// Pool account (arbitrary address)
		metas_[0] = solanago.NewAccountMeta(pool, true, true)
		// [1] = [writable] lp_mint
		// LP token mint of the pool
		metas_[1] = solanago.NewAccountMeta(lpMint, true, false)
		// [2] = [] token_a_mint
		// Token A mint of the pool. Eg: USDT
		metas_[2] = solanago.NewAccountMeta(tokenAMint, false, false)
		// [3] = [] token_b_mint
		// Token B mint of the pool. Eg: USDC
		metas_[3] = solanago.NewAccountMeta(tokenBMint, false, false)
		// [4] = [writable] a_vault
		// Vault account for token A. Token A of the pool will be deposit / withdraw from this vault account.
		metas_[4] = solanago.NewAccountMeta(aVault, true, false)
		// [5] = [writable] b_vault
		// Vault account for token B. Token B of the pool will be deposit / withdraw from this vault account.
		metas_[5] = solanago.NewAccountMeta(bVault, true, false)
		// [6] = [writable] a_vault_lp_mint
		// LP token mint of vault A
		metas_[6] = solanago.NewAccountMeta(aVaultLpMint, true, false)
		// [7] = [writable] b_vault_lp_mint
		// LP token mint of vault B
		metas_[7] = solanago.NewAccountMeta(bVaultLpMint, true, false)
		// [8] = [writable] a_vault_lp
		// LP token account of vault A. Used to receive/burn the vault LP upon deposit/withdraw from the vault.
		metas_[8] = solanago.NewAccountMeta(aVaultLp, true, false)
		// [9] = [writable] b_vault_lp
		// LP token account of vault B. Used to receive/burn vault LP upon deposit/withdraw from the vault.
		metas_[9] = solanago.NewAccountMeta(bVaultLp, true, false)
		// [10] = [writable] admin_token_a
		// Admin token account for pool token A mint. Used to bootstrap the pool with initial liquidity.
		metas_[10] = solanago.NewAccountMeta(adminTokenA, true, false)
		// [11] = [writable] admin_token_b
		// Admin token account for pool token B mint. Used to bootstrap the pool with initial liquidity.
		metas_[11] = solanago.NewAccountMeta(adminTokenB, true, false)
		// [12] = [writable] admin_pool_lp
		// Admin pool LP token account. Used to receive LP during first deposit (initialize pool)
		// Admin pool LP token account. Used to receive LP during first deposit (initialize pool)
		metas_[12] = solanago.NewAccountMeta(adminPoolLp, true, false)
		// [13] = [writable] protocol_token_a_fee
		// Protocol fee token account for token A. Used to receive trading fee.
		metas_[13] = solanago.NewAccountMeta(protocolTokenAFee, true, false)
		// [14] = [writable] protocol_token_b_fee
		// Protocol fee token account for token B. Used to receive trading fee.
		metas_[14] = solanago.NewAccountMeta(protocolTokenBFee, true, false)
		// [15] = [writable,signer] admin
		// Admin account. This account will be the admin of the pool, and the payer for PDA during initialize pool.
		metas_[15] = solanago.NewAccountMeta(admin, true, true)
		// [16] = [] fee_owner
		metas_[16] = solanago.NewAccountMeta(feeOwner, false, false)
		// [17] = [] rent
		// Rent account.
		metas_[17] = solanago.NewAccountMeta(rent, false, false)
		// [18] = [writable] mint_metadata
		metas_[18] = solanago.NewAccountMeta(mintMetadata, true, false)
		// [19] = [] metadata_program
		metas_[19] = solanago.NewAccountMeta(metadataProgram, false, false)
		// [20] = [] vault_program
		// Vault program. The pool will deposit/withdraw liquidity from the vault.
		metas_[20] = solanago.NewAccountMeta(vaultProgram, false, false)
		// [21] = [] token_program
		// Token program.
		metas_[21] = solanago.NewAccountMeta(tokenProgram, false, false)
		// [22] = [] associated_token_program
		// Associated token program.
		metas_[22] = solanago.NewAccountMeta(associatedTokenProgram, false, false)
		// [23] = [] system_program
		// System program.
		metas_[23] = solanago.NewAccountMeta(systemProgram, false, false)
		// append remaining metas
		metas_ = append(metas_, remaining__...)
	}

	// Create the instruction.
	return solanago.NewInstruction(
		ProgramID,
		metas_,
		buf__.Bytes(),
	), nil
}

// Builds a "BuildInitializePermissionedPool" instruction.
// Initialize a new permissioned pool.
func BuildInitializePermissionedPool(
	// Params:
	curveTypeParam CurveType,

	// Accounts:
	pool solanago.PublicKey,
	lpMint solanago.PublicKey,
	tokenAMint solanago.PublicKey,
	tokenBMint solanago.PublicKey,
	aVault solanago.PublicKey,
	bVault solanago.PublicKey,
	aVaultLpMint solanago.PublicKey,
	bVaultLpMint solanago.PublicKey,
	aVaultLp solanago.PublicKey,
	bVaultLp solanago.PublicKey,
	adminTokenA solanago.PublicKey,
	adminTokenB solanago.PublicKey,
	adminPoolLp solanago.PublicKey,
	protocolTokenAFee solanago.PublicKey,
	protocolTokenBFee solanago.PublicKey,
	admin solanago.PublicKey,
	feeOwner solanago.PublicKey,
	rent solanago.PublicKey,
	mintMetadata solanago.PublicKey,
	metadataProgram solanago.PublicKey,
	vaultProgram solanago.PublicKey,
	tokenProgram solanago.PublicKey,
	associatedTokenProgram solanago.PublicKey,
	systemProgram solanago.PublicKey,
	remaining__ ...*solanago.AccountMeta,
) *solanago.GenericInstruction {
	instruction_, _ := NewInitializePermissionedPoolInstruction(
		curveTypeParam,
		pool,
		lpMint,
		tokenAMint,
		tokenBMint,
		aVault,
		bVault,
		aVaultLpMint,
		bVaultLpMint,
		aVaultLp,
		bVaultLp,
		adminTokenA,
		adminTokenB,
		adminPoolLp,
		protocolTokenAFee,
		protocolTokenBFee,
		admin,
		feeOwner,
		rent,
		mintMetadata,
		metadataProgram,
		vaultProgram,
		tokenProgram,
		associatedTokenProgram,
		systemProgram,
		remaining__...,
	)
	return instruction_
}
